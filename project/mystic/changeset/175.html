<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  
  

  


  
<!-- Mirrored from mmckerns.github.io/project/mystic/changeset/175 by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 19 May 2016 00:51:29 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <title>
      Changeset 175 – Mystic
    </title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <link rel="search" href="../search.html" />
        <link rel="prev" href="174.html" title="Changeset 174" />
        <link rel="last" href="862.html" title="Changeset 862" />
        <link rel="help" href="../wiki/TracGuide.html" />
        <link rel="alternate" href="http://mmckerns.github.io/project/mystic/changeset/175?format=diff&amp;new=175" type="text/plain" class="diff" title="Unified Diff" /><link rel="alternate" href="http://mmckerns.github.io/project/mystic/changeset/175?format=zip&amp;new=175" type="application/zip" class="zip" title="Zip Archive" />
        <link rel="next" href="176.html" title="Changeset 176" />
        <link rel="start" href="../wiki.html" />
        <link rel="stylesheet" href="../chrome/common/css/trac.css" type="text/css" /><link rel="stylesheet" href="../chrome/common/css/changeset.css" type="text/css" /><link rel="stylesheet" href="../chrome/common/css/diff.css" type="text/css" /><link rel="stylesheet" href="../chrome/common/css/code.css" type="text/css" />
        <link rel="first" href="1.html" title="Changeset 1" />
        <link rel="shortcut icon" href="http://mmckerns.github.io/mystic_icon.ico?" />
        <link rel="icon" href="http://mmckerns.github.io/mystic_icon.ico?" />
      <link type="application/opensearchdescription+xml" rel="search" href="../search/opensearch" title="Search Mystic" />
    <script type="text/javascript" src="../chrome/common/js/jquery.js"></script><script type="text/javascript" src="../chrome/common/js/babel.js"></script><script type="text/javascript" src="../chrome/common/js/trac.js"></script><script type="text/javascript" src="../chrome/common/js/search.js"></script><script type="text/javascript" src="../chrome/common/js/diff.js"></script>
    <!--[if lt IE 7]>
    <script type="text/javascript" src="/project/mystic/chrome/common/js/ie_pre7_hacks.js"></script>
    <![endif]-->
    <script type="text/javascript">
      jQuery(document).ready(function($) {
        $(".trac-toggledeleted").show().click(function() {
                  $(this).siblings().find(".trac-deleted").toggle();
                  return false;
        }).click();
        $("#content").find("li.entry h2 a").parent().addAnchor(_("Link to this diff"));
      });
    </script>
    <link rel="stylesheet" type="text/css" href="../chrome/site/style.css" />
  </head>
  <body>
    <div id="siteheader">
    </div>
    <div id="banner">
      <div id="header">
        <a id="logo" href="http://mmckerns.github.io/project/mystic/wiki.html"><img src="http://mmckerns.github.io/projects/mystic/mystic_banner.png" alt="MYSTIC" height="150" width="400" /></a>
      </div>
      <form id="search" action="http://mmckerns.github.io/project/mystic/search" method="get">
        <div>
          <label for="proj-search">Search:</label>
          <input type="text" id="proj-search" name="q" size="18" value="" />
          <input type="submit" value="Search" />
        </div>
      </form>
      <div id="metanav" class="nav">
    <ul>
      <li class="first"><a href="../login.html">Login</a></li><li><a href="../wiki/TracGuide.html">Help/Guide</a></li><li><a href="../about.html">About Trac</a></li><li class="last"><a href="../prefs.html">Preferences</a></li>
    </ul>
  </div>
    </div>
    <div id="mainnav" class="nav">
    <ul>
      <li class="first"><a href="../wiki.html">Wiki</a></li><li><a href="../timeline.html">Timeline</a></li><li><a href="../roadmap.html">Roadmap</a></li><li class="active"><a href="../browser.html">Browse Source</a></li><li><a href="../query.html">View Tickets</a></li><li class="last"><a href="../search.html">Search</a></li>
    </ul>
  </div>
    <div id="main">
      <div id="ctxtnav" class="nav">
        <h2>Context Navigation</h2>
          <ul>
              <li class="first"><span>&larr; <a class="prev" href="174.html" title="Changeset 174">Previous Changeset</a></span></li><li class="last"><span><a class="next" href="176.html" title="Changeset 176">Next Changeset</a> &rarr;</span></li>
          </ul>
        <hr />
      </div>
    <div id="content" class="changeset">
      <div id="title">
            <h1>Changeset 175</h1>
      </div>
      <form id="prefs" action="#">
        <div>
          
  <label for="style">View differences</label>
  <select id="style" name="style">
    <option selected="selected" value="inline">inline</option>
    <option value="sidebyside">side by side</option>
  </select>
  <div class="field">
    <label><input type="radio" name="contextall" value="0" checked="checked" />
             Show</label>
      <label><input type="text" name="contextlines" id="contextlines" size="2" maxlength="3" value="2" />
             lines around each change</label><br />
    <label><input type="radio" name="contextall" value="1" />
           Show the changes in full context</label>
  </div>
  <fieldset id="ignore">
    <legend>Ignore:</legend>
    <div class="field">
      <input type="checkbox" id="ignoreblanklines" name="ignoreblanklines" />
      <label for="ignoreblanklines">Blank lines</label>
    </div>
    <div class="field">
      <input type="checkbox" id="ignorecase" name="ignorecase" />
      <label for="ignorecase">Case changes</label>
    </div>
    <div class="field">
      <input type="checkbox" id="ignorewhitespace" name="ignorewhitespace" />
      <label for="ignorewhitespace">White space changes</label>
    </div>
  </fieldset>
  <div class="buttons">
    <input type="submit" name="update" value="Update" />
  </div>

        </div>
      </form>
      <dl id="overview">
          <dt class="property time">Timestamp:</dt>
          <dd class="time">
             08/09/09 13:04:00
             (<a class="timeline" href="http://mmckerns.github.io/project/mystic/timeline?from=2009-08-09T13%3A04%3A00-07%3A00&amp;precision=second" title="2009-08-09T13:04:00-07:00 in Timeline">7 years</a> ago)
          </dd>
          <dt class="property author">Author:</dt>
          <dd class="author">altafang</dd>
          <dt class="property message">Message:</dt>
          <dd class="message searchable">
            
            
              <p>
Editing termination conditions and making various edits to annealing and snobfit<br />
</p>

            
            
          </dd>
          <dt class="property location">Location:</dt>
          <dd class="searchable"><a href="http://mmckerns.github.io/project/mystic/browser/branches/alta/mystic-0.1a2/mystic?rev=175">branches/alta/mystic-0.1a2/mystic</a></dd>
        <dt class="property files">
          Files:
        </dt>
        <dd class="files">
          <div class="legend" id="file-legend">
            <dl>
              <dt class="mod"></dt><dd>3 edited</dd>
            </dl>
          </div>
          <br />
          <ul>
            <li>
          <div class="mod"> </div>
            <a title="Show entry in browser" href="http://mmckerns.github.io/project/mystic/browser/branches/alta/mystic-0.1a2/mystic/anneal_solver.py?rev=175">
              anneal_solver.py
            </a>
          <span class="comment">(modified)</span>
              (<a title="Show differences" href="#file0">20 diffs</a>)
            </li><li>
          <div class="mod"> </div>
            <a title="Show entry in browser" href="http://mmckerns.github.io/project/mystic/browser/branches/alta/mystic-0.1a2/mystic/snobfit_solver.py?rev=175">
              snobfit_solver.py
            </a>
          <span class="comment">(modified)</span>
              (<a title="Show differences" href="#file1">47 diffs</a>)
            </li><li>
          <div class="mod"> </div>
            <a title="Show entry in browser" href="http://mmckerns.github.io/project/mystic/browser/branches/alta/mystic-0.1a2/mystic/termination.py?rev=175">
              termination.py
            </a>
          <span class="comment">(modified)</span>
              (<a title="Show differences" href="#file2">2 diffs</a>)
            </li>
          </ul>
        </dd>
      </dl>
      <div class="diff">
        <div class="legend" id="diff-legend">
          <h3>Legend:</h3>
          <dl>
            <dt class="unmod"></dt><dd>Unmodified</dd>
            <dt class="add"></dt><dd>Added</dd>
            <dt class="rem"></dt><dd>Removed</dd>
          </dl>
        </div>
        <div class="diff">
  <ul class="entries">
      <li class="entry">
        <h2 id="file0">
          <a href="175/branches/alta/mystic-0.1a2/mystic/anneal_solver.html" title="Show the changeset 175 restricted to branches/alta/mystic-0.1a2/mystic/anneal_solver.py">branches/alta/mystic-0.1a2/mystic/anneal_solver.py</a>
        </h2>
        <table class="trac-diff inline" summary="Differences" cellspacing="0">
              <colgroup><col class="lineno" /><col class="lineno" /><col class="content" /></colgroup>
              <thead>
                <tr>
                  <th title="Revision 160">
                    <a title="Show revision 160 of this file in browser" href="http://mmckerns.github.io/project/mystic/browser/branches/alta/mystic-0.1a2/mystic/anneal_solver.py?rev=160#L20">
                      r160</a>
                  </th>
                  <th title="Revision 175">
                    <a title="Show revision 175 of this file in browser" href="http://mmckerns.github.io/project/mystic/browser/branches/alta/mystic-0.1a2/mystic/anneal_solver.py?rev=175#L20">
                      r175</a>
                  </th>
                  <td> </td>
                </tr>
              </thead>
            <tbody class="unmod">
                  <tr>
                          <th>20</th><th>20</th><td class="l"><span>&nbsp; &nbsp; - StepMonitor = Sow()</span> </td>
                  </tr><tr>
                          <th>21</th><th>21</th><td class="l"><span>&nbsp; &nbsp; - enable_signal_handler()</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>22</th><th> </th><td class="l"><span>&nbsp; &nbsp; - termination = A<del>nnealTermination(</del>)</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>22</th><td class="r"><span>&nbsp; &nbsp; - termination = A<ins>veragePopulationImprovement(tolerance</ins>)</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>23</th><th>23</th><td class="l"><span></span> </td>
                  </tr><tr>
                          <th>24</th><th>24</th><td class="l"><span>Usage</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://mmckerns.github.io/project/mystic/browser/branches/alta/mystic-0.1a2/mystic/anneal_solver.py?rev=160#L189">…</a></th>
                  <th><a href="http://mmckerns.github.io/project/mystic/browser/branches/alta/mystic-0.1a2/mystic/anneal_solver.py?rev=175#L189">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>189</th><th>189</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; return</span> </td>
                  </tr><tr>
                          <th>190</th><th>190</th><td class="l"><span></span> </td>
                  </tr>
            </tbody><tbody class="rem">
                  <tr class="last first">
                          <th>191</th><th> </th><td class="l"><del># Replace uses of this with Sow()?</del> </td>
                  </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>192</th><th>191</th><td class="l"><span>class _state(object):</span> </td>
                  </tr><tr>
                          <th>193</th><th>192</th><td class="l"><span>&nbsp; &nbsp; def __init__(self):</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://mmckerns.github.io/project/mystic/browser/branches/alta/mystic-0.1a2/mystic/anneal_solver.py?rev=160#L238">…</a></th>
                  <th><a href="http://mmckerns.github.io/project/mystic/browser/branches/alta/mystic-0.1a2/mystic/anneal_solver.py?rev=175#L237">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>238</th><th>237</th><td class="l"><span>&nbsp; &nbsp; T0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;-- Initial Temperature (estimated as 1.2 times the largest</span> </td>
                  </tr><tr>
                          <th>239</th><th>238</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; cost-function deviation over random points in the range)</span> </td>
                  </tr>
            </tbody><tbody class="rem">
                  <tr class="first">
                          <th>240</th><th> </th><td class="l"><del>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [default=None]</del> </td>
                  </tr><tr>
                          <th>241</th><th> </th><td class="l"><del>&nbsp; &nbsp; Tf&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;-- Final goal temperature</del> </td>
                  </tr><tr>
                          <th>242</th><th> </th><td class="l"><del>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [default=1e-12]</del> </td>
                  </tr><tr class="last">
                          <th>243</th><th> </th><td class="l"><del>&nbsp; &nbsp; maxaccept&nbsp; &nbsp; -- Maximum changes to accept</del> </td>
                  </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>244</th><th>239</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [default=None]</span> </td>
                  </tr><tr>
                          <th>245</th><th>240</th><td class="l"><span>&nbsp; &nbsp; learn_rate&nbsp; &nbsp;-- scale constant for adjusting guesses</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://mmckerns.github.io/project/mystic/browser/branches/alta/mystic-0.1a2/mystic/anneal_solver.py?rev=160#L252">…</a></th>
                  <th><a href="http://mmckerns.github.io/project/mystic/browser/branches/alta/mystic-0.1a2/mystic/anneal_solver.py?rev=175#L247">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>252</th><th>247</th><td class="l"><span>&nbsp; &nbsp; dwell&nbsp; &nbsp; &nbsp; &nbsp; -- The number of times to search the space at each temperature.</span> </td>
                  </tr><tr>
                          <th>253</th><th>248</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [default=50]</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>254</th><th> </th><td class="l"><span>&nbsp; &nbsp; disp&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;-- Non-zero to print convergence messages.</span> </td>
                      </tr><tr>
                        <th>255</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [default=0]</span> </td>
                      </tr>
                      <tr>
                        <th> </th><th>249</th><td class="r"><span></span> </td>
                      </tr><tr>
                        <th> </th><th>250</th><td class="r"><span>&nbsp; &nbsp; Optional Termination Conditions:</span> </td>
                      </tr><tr>
                        <th> </th><th>251</th><td class="r"><span>&nbsp; &nbsp; Tf&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;-- Final goal temperature</span> </td>
                      </tr><tr>
                        <th> </th><th>252</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [default=1e-12]</span> </td>
                      </tr><tr>
                        <th> </th><th>253</th><td class="r"><span>&nbsp; &nbsp; maxaccept&nbsp; &nbsp; -- Maximum changes to accept</span> </td>
                      </tr><tr class="last">
                        <th> </th><th>254</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [default=None]</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>256</th><th>255</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; """</span> </td>
                  </tr><tr>
                          <th>257</th><th>256</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; #allow for inputs that don't conform to AbstractSolver interface</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://mmckerns.github.io/project/mystic/browser/branches/alta/mystic-0.1a2/mystic/anneal_solver.py?rev=160#L259">…</a></th>
                  <th><a href="http://mmckerns.github.io/project/mystic/browser/branches/alta/mystic-0.1a2/mystic/anneal_solver.py?rev=175#L258">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>259</th><th>258</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; x0 = self.population[0]</span> </td>
                  </tr><tr>
                          <th>260</th><th>259</th><td class="l"><span></span> </td>
                  </tr>
            </tbody><tbody class="rem">
                  <tr class="last first">
                          <th>261</th><th> </th><td class="l"><del>&nbsp; &nbsp; &nbsp; &nbsp; callback = None</del> </td>
                  </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>262</th><th>260</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; schedule = "fast"</span> </td>
                  </tr><tr>
                          <th>263</th><th>261</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; T0 = None</span> </td>
                  </tr>
            </tbody><tbody class="rem">
                  <tr class="last first">
                          <th>264</th><th> </th><td class="l"><del>&nbsp; &nbsp; &nbsp; &nbsp; Tf = 1e-12</del> </td>
                  </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>265</th><th>262</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; boltzmann = 1.0</span> </td>
                  </tr><tr>
                          <th>266</th><th>263</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; learn_rate = 0.5</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://mmckerns.github.io/project/mystic/browser/branches/alta/mystic-0.1a2/mystic/anneal_solver.py?rev=160#L269">…</a></th>
                  <th><a href="http://mmckerns.github.io/project/mystic/browser/branches/alta/mystic-0.1a2/mystic/anneal_solver.py?rev=175#L266">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>269</th><th>266</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; m = 1.0</span> </td>
                  </tr><tr>
                          <th>270</th><th>267</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; n = 1.0</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>271</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; disp = 0</span> </td>
                      </tr><tr>
                        <th>272</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; self._maxaccept = None&nbsp; &nbsp;</span> </td>
                      </tr><tr>
                        <th>273</th><th> </th><td class="l"><span></span> </td>
                      </tr><tr>
                        <th>274</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; if kwds.has_key('callback'): callback = kwds['callback']</span> </td>
                      </tr>
                      <tr>
                        <th> </th><th>268</th><td class="r"><span></span> </td>
                      </tr><tr>
                        <th> </th><th>269</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; Tf = 1e-12 # or None?</span> </td>
                      </tr><tr>
                        <th> </th><th>270</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; self._maxaccept = None</span> </td>
                      </tr><tr>
                        <th> </th><th>271</th><td class="r"><span></span> </td>
                      </tr><tr>
                        <th> </th><th>272</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; self.disp = 0</span> </td>
                      </tr><tr>
                        <th> </th><th>273</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; self.callback = None</span> </td>
                      </tr><tr class="last">
                        <th> </th><th>274</th><td class="r"><span></span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>275</th><th>275</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; if kwds.has_key('schedule'): schedule = kwds['schedule']</span> </td>
                  </tr><tr>
                          <th>276</th><th>276</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; if kwds.has_key('T0'): T0 = kwds['T0']</span> </td>
                  </tr>
            </tbody><tbody class="rem">
                  <tr class="last first">
                          <th>277</th><th> </th><td class="l"><del>&nbsp; &nbsp; &nbsp; &nbsp; if kwds.has_key('Tf'): Tf = kwds['Tf']</del> </td>
                  </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>278</th><th>277</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; if kwds.has_key('boltzmann'): boltzmann = kwds['boltzmann']</span> </td>
                  </tr><tr>
                          <th>279</th><th>278</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; if kwds.has_key('learn_rate'): learn_rate = kwds['learn_rate']</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://mmckerns.github.io/project/mystic/browser/branches/alta/mystic-0.1a2/mystic/anneal_solver.py?rev=160#L282">…</a></th>
                  <th><a href="http://mmckerns.github.io/project/mystic/browser/branches/alta/mystic-0.1a2/mystic/anneal_solver.py?rev=175#L281">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>282</th><th>281</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; if kwds.has_key('m'): m = kwds['m']</span> </td>
                  </tr><tr>
                          <th>283</th><th>282</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; if kwds.has_key('n'): n = kwds['n']&nbsp; &nbsp; </span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>284</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; if kwds.has_key('disp'): disp = kwds['disp']</span> </td>
                      </tr>
                      <tr>
                        <th> </th><th>283</th><td class="r"><span></span> </td>
                      </tr><tr class="last">
                        <th> </th><th>284</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; if kwds.has_key('Tf'): Tf = kwds['Tf']</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>285</th><th>285</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; if kwds.has_key('maxaccept'): self._maxaccept = kwds['maxaccept']</span> </td>
                  </tr>
            </tbody><tbody class="add">
                  <tr class="first">
                          <th> </th><th>286</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>287</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; if kwds.has_key('disp'): self.disp = kwds['disp']</ins> </td>
                  </tr><tr>
                          <th> </th><th>288</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; if kwds.has_key('callback'): self.callback = kwds['callback']</ins> </td>
                  </tr><tr class="last">
                          <th> </th><th>289</th><td class="r"><ins></ins> </td>
                  </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>286</th><th>290</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; #-------------------------------------------------------------</span> </td>
                  </tr><tr>
                          <th>287</th><th>291</th><td class="l"><span></span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://mmckerns.github.io/project/mystic/browser/branches/alta/mystic-0.1a2/mystic/anneal_solver.py?rev=160#L293">…</a></th>
                  <th><a href="http://mmckerns.github.io/project/mystic/browser/branches/alta/mystic-0.1a2/mystic/anneal_solver.py?rev=175#L297">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>293</th><th>297</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; if self._useStrictRange:</span> </td>
                  </tr><tr>
                          <th>294</th><th>298</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; x0 = self._clipGuessWithinRangeBoundary(x0)</span> </td>
                  </tr>
            </tbody><tbody class="add">
                  <tr class="last first">
                          <th> </th><th>299</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # Note: wrap_bounds changes the results slightly from the original</ins> </td>
                  </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>295</th><th>300</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; func = wrap_bounds(func, self._strictMin, self._strictMax)</span> </td>
                  </tr><tr>
                          <th>296</th><th>301</th><td class="l"><span></span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://mmckerns.github.io/project/mystic/browser/branches/alta/mystic-0.1a2/mystic/anneal_solver.py?rev=160#L314">…</a></th>
                  <th><a href="http://mmckerns.github.io/project/mystic/browser/branches/alta/mystic-0.1a2/mystic/anneal_solver.py?rev=175#L319">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>314</th><th>319</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; self.bestSolution = x0</span> </td>
                  </tr><tr>
                          <th>315</th><th>320</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; else:</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>316</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; self.bestSolution = None</span> </td>
                      </tr>
                      <tr>
                        <th> </th><th>321</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; #self.bestSolution = None</span> </td>
                      </tr><tr class="last">
                        <th> </th><th>322</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; self.bestSolution = x0</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>317</th><th>323</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; self.bestEnergy = 300e8</span> </td>
                  </tr><tr>
                          <th>318</th><th>324</th><td class="l"><span></span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://mmckerns.github.io/project/mystic/browser/branches/alta/mystic-0.1a2/mystic/anneal_solver.py?rev=160#L327">…</a></th>
                  <th><a href="http://mmckerns.github.io/project/mystic/browser/branches/alta/mystic-0.1a2/mystic/anneal_solver.py?rev=175#L333">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>327</th><th>333</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; schedule.T = schedule.T0</span> </td>
                  </tr><tr>
                          <th>328</th><th>334</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; fqueue = [100, 300, 500, 700]</span> </td>
                  </tr>
            </tbody><tbody class="add">
                  <tr class="last first">
                          <th> </th><th>335</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; self.population = asarray(fqueue)*1.0</ins> </td>
                  </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>329</th><th>336</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; iters = 0</span> </td>
                  </tr><tr>
                          <th>330</th><th>337</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; while 1:</span> </td>
                  </tr>
            </tbody><tbody class="add">
                  <tr class="last first">
                          <th> </th><th>338</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; StepMonitor(self.bestSolution, self.bestEnergy)</ins> </td>
                  </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>331</th><th>339</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; for n in range(dwell):</span> </td>
                  </tr><tr>
                          <th>332</th><th>340</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; current_state.x = schedule.update_guess(last_state.x)</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://mmckerns.github.io/project/mystic/browser/branches/alta/mystic-0.1a2/mystic/anneal_solver.py?rev=160#L348">…</a></th>
                  <th><a href="http://mmckerns.github.io/project/mystic/browser/branches/alta/mystic-0.1a2/mystic/anneal_solver.py?rev=175#L356">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>348</th><th>356</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; af = asarray(fqueue)*1.0</span> </td>
                  </tr><tr>
                          <th>349</th><th>357</th><td class="l"><span></span> </td>
                  </tr>
            </tbody><tbody class="add">
                  <tr class="last first">
                          <th> </th><th>358</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # Update monitors/variables</ins> </td>
                  </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>350</th><th>359</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; self.population = af</span> </td>
                  </tr><tr>
                          <th>351</th><th>360</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; self.energy_history.append(self.bestEnergy)</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>352</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; StepMonitor(self.bestSolution[:], self.bestEnergy)</span> </td>
                      </tr><tr>
                        <th>353</th><th> </th><td class="l"><span></span> </td>
                      </tr><tr>
                        <th>354</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if callback is not None:</span> </td>
                      </tr><tr>
                        <th>355</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; callback(self.bestSolution)</span> </td>
                      </tr>
                      <tr>
                        <th> </th><th>361</th><td class="r"><span></span> </td>
                      </tr><tr>
                        <th> </th><th>362</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if self.callback is not None:</span> </td>
                      </tr><tr class="last">
                        <th> </th><th>363</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; self.callback(self.bestSolution)</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>356</th><th>364</th><td class="l"><span></span> </td>
                  </tr><tr>
                          <th>357</th><th>365</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # Stopping conditions</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://mmckerns.github.io/project/mystic/browser/branches/alta/mystic-0.1a2/mystic/anneal_solver.py?rev=160#L373">…</a></th>
                  <th><a href="http://mmckerns.github.io/project/mystic/browser/branches/alta/mystic-0.1a2/mystic/anneal_solver.py?rev=175#L381">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>373</th><th>381</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (Tf is not None) and (schedule.T &lt; Tf):</span> </td>
                  </tr><tr>
                          <th>374</th><th>382</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>375</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (self._maxfun is not None) and (schedule.feval &gt; self._maxfun):</span> </td>
                      </tr>
                      <tr>
                        <th> </th><th>383</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# if (self._maxfun is not None) and (schedule.feval &gt; self._maxfun):</span> </td>
                      </tr><tr>
                        <th> </th><th>384</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;#&nbsp; &nbsp; &nbsp;retval = 1</span> </td>
                      </tr><tr>
                        <th> </th><th>385</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;#&nbsp; &nbsp; &nbsp;break</span> </td>
                      </tr><tr class="last">
                        <th> </th><th>386</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (self._maxfun is not None) and (fcalls[0] &gt; self._maxfun):</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>376</th><th>387</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; retval = 1</span> </td>
                  </tr><tr>
                          <th>377</th><th>388</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://mmckerns.github.io/project/mystic/browser/branches/alta/mystic-0.1a2/mystic/anneal_solver.py?rev=160#L382">…</a></th>
                  <th><a href="http://mmckerns.github.io/project/mystic/browser/branches/alta/mystic-0.1a2/mystic/anneal_solver.py?rev=175#L393">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>382</th><th>393</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break</span> </td>
                  </tr><tr>
                          <th>383</th><th>394</th><td class="l"><span></span> </td>
                  </tr>
            </tbody><tbody class="add">
                  <tr class="first">
                          <th> </th><th>395</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; signal.signal(signal.SIGINT,signal.default_int_handler)</ins> </td>
                  </tr><tr class="last">
                          <th> </th><th>396</th><td class="r"><ins></ins> </td>
                  </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>384</th><th>397</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; # Store some information. Is there a better way to do this?</span> </td>
                  </tr><tr>
                          <th>385</th><th>398</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; self.generations = iters&nbsp; &nbsp; &nbsp; &nbsp; # Number of iterations</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://mmckerns.github.io/project/mystic/browser/branches/alta/mystic-0.1a2/mystic/anneal_solver.py?rev=160#L387">…</a></th>
                  <th><a href="http://mmckerns.github.io/project/mystic/browser/branches/alta/mystic-0.1a2/mystic/anneal_solver.py?rev=175#L400">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>387</th><th>400</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; self.accept = schedule.accepted # Number of tests accepted</span> </td>
                  </tr><tr>
                          <th>388</th><th>401</th><td class="l"><span></span> </td>
                  </tr>
            </tbody><tbody class="rem">
                  <tr class="first">
                          <th>389</th><th> </th><td class="l"><del>&nbsp; &nbsp; &nbsp; &nbsp; signal.signal(signal.SIGINT,signal.default_int_handler)</del> </td>
                  </tr><tr class="last">
                          <th>390</th><th> </th><td class="l"><del></del> </td>
                  </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>391</th><th>402</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; # code below here pushes output to scipy.optimize interface</span> </td>
                  </tr><tr>
                          <th>392</th><th>403</th><td class="l"><span></span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>393</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; if <del></del>disp:</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>404</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; if <ins>self.</ins>disp:</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>394</th><th>405</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if retval == 1: </span> </td>
                  </tr><tr>
                          <th>395</th><th>406</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; print "Warning: Maximum number of function evaluations has "\</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://mmckerns.github.io/project/mystic/browser/branches/alta/mystic-0.1a2/mystic/anneal_solver.py?rev=160#L452">…</a></th>
                  <th><a href="http://mmckerns.github.io/project/mystic/browser/branches/alta/mystic-0.1a2/mystic/anneal_solver.py?rev=175#L463">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>452</th><th>463</th><td class="l"><span>&nbsp; &nbsp; retval&nbsp; -- Flag indicating stopping condition:</span> </td>
                  </tr><tr>
                          <th>453</th><th>464</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 1 : Maximum function evaluations</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>454</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 2 : Maximum <del>cooling </del>iterations reached</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>465</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 2 : Maximum <ins></ins>iterations reached</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>455</th><th>466</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 3 : Maximum accepted query locations reached</span> </td>
                  </tr><tr>
                          <th>456</th><th>467</th><td class="l"><span>&nbsp; &nbsp; allvecs -- a list of solutions at each iteration.</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://mmckerns.github.io/project/mystic/browser/branches/alta/mystic-0.1a2/mystic/anneal_solver.py?rev=160#L458">…</a></th>
                  <th><a href="http://mmckerns.github.io/project/mystic/browser/branches/alta/mystic-0.1a2/mystic/anneal_solver.py?rev=175#L469">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>458</th><th>469</th><td class="l"><span></span> </td>
                  </tr><tr>
                          <th>459</th><th>470</th><td class="l"><span>&nbsp; &nbsp; from mystic.tools import Sow</span> </td>
                  </tr>
            </tbody><tbody class="add">
                  <tr class="last first">
                          <th> </th><th>471</th><td class="r"><ins>&nbsp; &nbsp; from mystic.termination import AveragePopulationImprovement</ins> </td>
                  </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>460</th><th>472</th><td class="l"><span>&nbsp; &nbsp; stepmon = Sow()</span> </td>
                  </tr><tr>
                          <th>461</th><th>473</th><td class="l"><span>&nbsp; &nbsp; evalmon = Sow()</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>462</th><th> </th><td class="l"><span>&nbsp; &nbsp; from mystic.termination import AnnealTermination</span> </td>
                      </tr><tr>
                        <th>463</th><th> </th><td class="l"><span></span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>474</th><td class="r"><span>&nbsp; &nbsp; </span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>464</th><th>475</th><td class="l"><span>&nbsp; &nbsp; x0 = asarray(x0)</span> </td>
                  </tr>
            </tbody><tbody class="rem">
                  <tr class="last first">
                          <th>465</th><th> </th><td class="l"><del></del> </td>
                  </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>466</th><th>476</th><td class="l"><span>&nbsp; &nbsp; solver = AnnealSolver(len(x0))</span> </td>
                  </tr><tr>
                          <th>467</th><th>477</th><td class="l"><span>&nbsp; &nbsp; solver.SetInitialPoints(x0)</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://mmckerns.github.io/project/mystic/browser/branches/alta/mystic-0.1a2/mystic/anneal_solver.py?rev=160#L470">…</a></th>
                  <th><a href="http://mmckerns.github.io/project/mystic/browser/branches/alta/mystic-0.1a2/mystic/anneal_solver.py?rev=175#L480">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>470</th><th>480</th><td class="l"><span>&nbsp; &nbsp; </span> </td>
                  </tr><tr>
                          <th>471</th><th>481</th><td class="l"><span>&nbsp; &nbsp; # Default bounds cause errors when function is not 1-dimensional</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>472</th><th> </th><td class="l"><span>&nbsp; &nbsp; lower = asarray(lower)</span> </td>
                      </tr><tr>
                        <th>473</th><th> </th><td class="l"><span>&nbsp; &nbsp; upper = asarray(upper)</span> </td>
                      </tr><tr>
                        <th>474</th><th> </th><td class="l"><span>&nbsp; &nbsp; solver.SetStrictRanges(lower,upper) </span> </td>
                      </tr><tr>
                        <th>475</th><th> </th><td class="l"><span>&nbsp; &nbsp; solver.Solve(func,termination=AnnealTermination(feps),\</span> </td>
                      </tr>
                      <tr>
                        <th> </th><th>482</th><td class="r"><span>&nbsp; &nbsp; solver.SetStrictRanges(lower,upper)</span> </td>
                      </tr><tr>
                        <th> </th><th>483</th><td class="r"><span></span> </td>
                      </tr><tr class="last">
                        <th> </th><th>484</th><td class="r"><span>&nbsp; &nbsp; solver.Solve(func,termination=AveragePopulationImprovement(tolerance=feps),\</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>476</th><th>485</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;EvaluationMonitor=evalmon,StepMonitor=stepmon,\</span> </td>
                  </tr><tr>
                          <th>477</th><th>486</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;ExtraArgs=args, callback=callback,\</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://mmckerns.github.io/project/mystic/browser/branches/alta/mystic-0.1a2/mystic/anneal_solver.py?rev=160#L483">…</a></th>
                  <th><a href="http://mmckerns.github.io/project/mystic/browser/branches/alta/mystic-0.1a2/mystic/anneal_solver.py?rev=175#L492">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>483</th><th>492</th><td class="l"><span></span> </td>
                  </tr><tr>
                          <th>484</th><th>493</th><td class="l"><span>&nbsp; &nbsp; # code below here pushes output to scipy.optimize interface</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>485</th><th> </th><td class="l"><span>&nbsp; &nbsp; <del></del>x = list(solver.bestSolution)</span> </td>
                      </tr><tr>
                        <th>486</th><th> </th><td class="l"><span>&nbsp; &nbsp; <del>#</del>x = solver.bestSolution</span> </td>
                      </tr>
                      <tr>
                        <th> </th><th>494</th><td class="r"><span>&nbsp; &nbsp; <ins>#</ins>x = list(solver.bestSolution)</span> </td>
                      </tr><tr class="last">
                        <th> </th><th>495</th><td class="r"><span>&nbsp; &nbsp; <ins></ins>x = solver.bestSolution</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>487</th><th>496</th><td class="l"><span>&nbsp; &nbsp; fval = solver.bestEnergy</span> </td>
                  </tr><tr>
                          <th>488</th><th>497</th><td class="l"><span>&nbsp; &nbsp; fcalls = len(evalmon.x)</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://mmckerns.github.io/project/mystic/browser/branches/alta/mystic-0.1a2/mystic/anneal_solver.py?rev=160#L493">…</a></th>
                  <th><a href="http://mmckerns.github.io/project/mystic/browser/branches/alta/mystic-0.1a2/mystic/anneal_solver.py?rev=175#L502">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>493</th><th>502</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; allvecs.append(stepmon.x[i])</span> </td>
                  </tr><tr>
                          <th>494</th><th>503</th><td class="l"><span></span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>495</th><th> </th><td class="l"><span>&nbsp; &nbsp; # to be fixed<del>?</del></span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>504</th><td class="r"><span>&nbsp; &nbsp; # to be fixed<ins></ins></span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>496</th><th>505</th><td class="l"><span>&nbsp; &nbsp; T = solver.T</span> </td>
                  </tr><tr>
                          <th>497</th><th>506</th><td class="l"><span>&nbsp; &nbsp; accept = solver.accept</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://mmckerns.github.io/project/mystic/browser/branches/alta/mystic-0.1a2/mystic/anneal_solver.py?rev=160#L516">…</a></th>
                  <th><a href="http://mmckerns.github.io/project/mystic/browser/branches/alta/mystic-0.1a2/mystic/anneal_solver.py?rev=175#L525">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>516</th><th>525</th><td class="l"><span>&nbsp; &nbsp; return retlist</span> </td>
                  </tr><tr>
                          <th>517</th><th>526</th><td class="l"><span></span> </td>
                  </tr>
            </tbody><tbody class="add">
                  <tr class="first">
                          <th> </th><th>527</th><td class="r"><ins>if __name__=='__main__':</ins> </td>
                  </tr><tr>
                          <th> </th><th>528</th><td class="r"><ins>&nbsp; &nbsp; help(__name__)</ins> </td>
                  </tr><tr>
                          <th> </th><th>529</th><td class="r"><ins></ins> </td>
                  </tr><tr class="last">
                          <th> </th><th>530</th><td class="r"><ins># end of file</ins> </td>
                  </tr>
            </tbody>
        </table>
      </li>
      <li class="entry">
        <h2 id="file1">
          <a href="175/branches/alta/mystic-0.1a2/mystic/snobfit_solver.html" title="Show the changeset 175 restricted to branches/alta/mystic-0.1a2/mystic/snobfit_solver.py">branches/alta/mystic-0.1a2/mystic/snobfit_solver.py</a>
        </h2>
        <table class="trac-diff inline" summary="Differences" cellspacing="0">
              <colgroup><col class="lineno" /><col class="lineno" /><col class="content" /></colgroup>
              <thead>
                <tr>
                  <th title="Revision 174">
                    <a title="Show revision 174 of this file in browser" href="http://mmckerns.github.io/project/mystic/browser/branches/alta/mystic-0.1a2/mystic/snobfit_solver.py?rev=174#L27">
                      r174</a>
                  </th>
                  <th title="Revision 175">
                    <a title="Show revision 175 of this file in browser" href="http://mmckerns.github.io/project/mystic/browser/branches/alta/mystic-0.1a2/mystic/snobfit_solver.py?rev=175#L27">
                      r175</a>
                  </th>
                  <td> </td>
                </tr>
              </thead>
            <tbody class="unmod">
                  <tr>
                          <th>27</th><th>27</th><td class="l"><span>&nbsp; &nbsp; - StepMonitor = Sow()</span> </td>
                  </tr><tr>
                          <th>28</th><th>28</th><td class="l"><span>&nbsp; &nbsp; - enable_signal_handler()</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>29</th><th> </th><td class="l"><span>&nbsp; &nbsp; - termination = SnobfitTermination(rtol, ftol, generations)</span> </td>
                      </tr>
                      <tr>
                        <th> </th><th>29</th><td class="r"><span>&nbsp; &nbsp; - termination = FglobTermination(fglob, tolerance, generations) for fglob !=0.</span> </td>
                      </tr><tr>
                        <th> </th><th>30</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; = VTRChangeOverGenerations(costtolerance,gentolerance,generations) </span> </td>
                      </tr><tr>
                        <th> </th><th>31</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; for fglob == 0</span> </td>
                      </tr><tr>
                        <th> </th><th>32</th><td class="r"><span></span> </td>
                      </tr><tr class="last">
                        <th> </th><th>33</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; where fglob is the user-specified global function value (default=0).</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>30</th><th>34</th><td class="l"><span></span> </td>
                  </tr><tr>
                          <th>31</th><th>35</th><td class="l"><span>Usage</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://mmckerns.github.io/project/mystic/browser/branches/alta/mystic-0.1a2/mystic/snobfit_solver.py?rev=174#L123">…</a></th>
                  <th><a href="http://mmckerns.github.io/project/mystic/browser/branches/alta/mystic-0.1a2/mystic/snobfit_solver.py?rev=175#L127">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>123</th><th>127</th><td class="l"><span>&nbsp; &nbsp; p -- probability of generating a evaluation point of Class 4.</span> </td>
                  </tr><tr>
                          <th>124</th><th>128</th><td class="l"><span>&nbsp; &nbsp; fac&nbsp; &nbsp; &nbsp;-- Factor for multiplicative perturbation of the data.</span> </td>
                  </tr>
            </tbody><tbody class="rem">
                  <tr class="last first">
                          <th>125</th><th> </th><td class="l"><del>&nbsp; &nbsp; fglob -- the user specified global function value.</del> </td>
                  </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>126</th><th>129</th><td class="l"><span></span> </td>
                  </tr><tr>
                          <th>127</th><th>130</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; """</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://mmckerns.github.io/project/mystic/browser/branches/alta/mystic-0.1a2/mystic/snobfit_solver.py?rev=174#L130">…</a></th>
                  <th><a href="http://mmckerns.github.io/project/mystic/browser/branches/alta/mystic-0.1a2/mystic/snobfit_solver.py?rev=175#L133">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>130</th><th>133</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; self.p = 0.5</span> </td>
                  </tr><tr>
                          <th>131</th><th>134</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; self.fac = 0.0</span> </td>
                  </tr>
            </tbody><tbody class="rem">
                  <tr class="first">
                          <th>132</th><th> </th><td class="l"><del>&nbsp; &nbsp; &nbsp; &nbsp; self.fglob = 0</del> </td>
                  </tr><tr class="last">
                          <th>133</th><th> </th><td class="l"><del>&nbsp; &nbsp; &nbsp; &nbsp; self.disp = False</del> </td>
                  </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>134</th><th>135</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; self.callback = None</span> </td>
                  </tr>
            </tbody><tbody class="add">
                  <tr class="last first">
                          <th> </th><th>136</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; self.disp = 0</ins> </td>
                  </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>135</th><th>137</th><td class="l"><span></span> </td>
                  </tr><tr>
                          <th>136</th><th>138</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; # Initialize some variables depending on input</span> </td>
                  </tr><tr>
                          <th>137</th><th>139</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; if kwds.has_key('p'): self.p = kwds['p']</span> </td>
                  </tr><tr>
                          <th>138</th><th>140</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; if kwds.has_key('fac'): self.fac = kwds['fac']</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>139</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; if kwds.has_key('<del>fglob'): self.fglob = kwds['fglob</del>']</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>141</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; if kwds.has_key('<ins>callback'): self.callback = kwds['callback</ins>']</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>140</th><th>142</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; if kwds.has_key('disp'): self.disp = kwds['disp']</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>141</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; if kwds.has_key('callback'): self.callback = kwds['callback']</span> </td>
                      </tr>
                      <tr>
                        <th> </th><th>143</th><td class="r"><span></span> </td>
                      </tr><tr>
                        <th> </th><th>144</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; # For convenience (and uncertainty calculations):</span> </td>
                      </tr><tr class="last">
                        <th> </th><th>145</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; self.func = func</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>142</th><th>146</th><td class="l"><span></span> </td>
                  </tr><tr>
                          <th>143</th><th>147</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; #-------------------------------------------------------------</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://mmckerns.github.io/project/mystic/browser/branches/alta/mystic-0.1a2/mystic/snobfit_solver.py?rev=174#L145">…</a></th>
                  <th><a href="http://mmckerns.github.io/project/mystic/browser/branches/alta/mystic-0.1a2/mystic/snobfit_solver.py?rev=175#L149">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>145</th><th>149</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; self._EARLYEXIT = False</span> </td>
                  </tr><tr>
                          <th>146</th><th>150</th><td class="l"><span></span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>147</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; fcalls, <del>func = wrap_function(</del>func, ExtraArgs, EvaluationMonitor)</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>151</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; fcalls, <ins>self.func = wrap_function(self.</ins>func, ExtraArgs, EvaluationMonitor)</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>148</th><th>152</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; if self._useStrictRange:</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>149</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; #for i in range(self.nPop):</span> </td>
                      </tr><tr>
                        <th>150</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; #&nbsp; &nbsp; self.population[i] = self._clipGuessWithinRangeBoundary(self.population[i])</span> </td>
                      </tr><tr>
                        <th>151</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; #func = wrap_bounds(func, self._strictMin, self._strictMax)</span> </td>
                      </tr><tr>
                        <th>152</th><th> </th><td class="l"><span></span> </td>
                      </tr><tr>
                        <th>153</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # Fix for when bounds were set after initial points. </span> </td>
                      </tr><tr>
                        <th>154</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # Snobfit's initialization uses the bounds not just for clipping, so </span> </td>
                      </tr><tr>
                        <th>155</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # the above code wouldn't really be quite right.</span> </td>
                      </tr><tr>
                        <th>156</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # Problem with this: what if SetRandomInitialPoints was called and </span> </td>
                      </tr><tr>
                        <th>157</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # the self.population[0] was something weird?</span> </td>
                      </tr>
                      <tr>
                        <th> </th><th>153</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; for i in range(self.nPop):</span> </td>
                      </tr><tr>
                        <th> </th><th>154</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; self.population[i] = self._clipGuessWithinRangeBoundary(self.population[i])</span> </td>
                      </tr><tr>
                        <th> </th><th>155</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; self.func = wrap_bounds(self.func, self._strictMin, self._strictMax)</span> </td>
                      </tr><tr>
                        <th> </th><th>156</th><td class="r"><span></span> </td>
                      </tr><tr>
                        <th> </th><th>157</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # Fix for when bounds were set after initial points: reinitialize</span> </td>
                      </tr><tr class="last">
                        <th> </th><th>158</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # This may give different results from if SetStrictRanges was called first</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>158</th><th>159</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; x0 = self.population[0]</span> </td>
                  </tr><tr>
                          <th>159</th><th>160</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; self.SetInitialPoints(x0)</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://mmckerns.github.io/project/mystic/browser/branches/alta/mystic-0.1a2/mystic/snobfit_solver.py?rev=174#L164">…</a></th>
                  <th><a href="http://mmckerns.github.io/project/mystic/browser/branches/alta/mystic-0.1a2/mystic/snobfit_solver.py?rev=175#L165">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>164</th><th>165</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; #-------------------------------------------------------------</span> </td>
                  </tr><tr>
                          <th>165</th><th>166</th><td class="l"><span></span> </td>
                  </tr>
            </tbody><tbody class="rem">
                  <tr class="first">
                          <th>166</th><th> </th><td class="l"><del>&nbsp; &nbsp; &nbsp; &nbsp; # to be fixed</del> </td>
                  </tr><tr>
                          <th>167</th><th> </th><td class="l"><del>&nbsp; &nbsp; &nbsp; &nbsp; self.func = func</del> </td>
                  </tr><tr class="last">
                          <th>168</th><th> </th><td class="l"><del></del> </td>
                  </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>169</th><th>167</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; x0 = self.population[0]</span> </td>
                  </tr><tr>
                          <th>170</th><th>168</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; self.x = self.population</span> </td>
                  </tr><tr>
                          <th>171</th><th>169</th><td class="l"><span></span> </td>
                  </tr>
            </tbody><tbody class="add">
                  <tr class="first">
                          <th> </th><th>170</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; self.fglob = 0</ins> </td>
                  </tr><tr class="last">
                          <th> </th><th>171</th><td class="r"><ins></ins> </td>
                  </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>172</th><th>172</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; # The number of safeguarded nearest neighbors</span> </td>
                  </tr><tr>
                          <th>173</th><th>173</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; self.snn = self.nPop - 1</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://mmckerns.github.io/project/mystic/browser/branches/alta/mystic-0.1a2/mystic/snobfit_solver.py?rev=174#L178">…</a></th>
                  <th><a href="http://mmckerns.github.io/project/mystic/browser/branches/alta/mystic-0.1a2/mystic/snobfit_solver.py?rev=175#L178">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>178</th><th>178</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; # Other initializations</span> </td>
                  </tr><tr>
                          <th>179</th><th>179</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; self.constraint = None</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>180</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; (self.f, self.df) = self._setInitial_fdf(<del>func</del>)</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>180</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; (self.f, self.df) = self._setInitial_fdf(<ins></ins>)</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>181</th><th>181</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; self.nx = self.x.shape[0]</span> </td>
                  </tr><tr>
                          <th>182</th><th>182</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; self.setInit()&nbsp; &nbsp;</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://mmckerns.github.io/project/mystic/browser/branches/alta/mystic-0.1a2/mystic/snobfit_solver.py?rev=174#L210">…</a></th>
                  <th><a href="http://mmckerns.github.io/project/mystic/browser/branches/alta/mystic-0.1a2/mystic/snobfit_solver.py?rev=175#L210">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>210</th><th>210</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;if fcalls[0] == initfcalls:</span> </td>
                  </tr><tr>
                          <th>211</th><th>211</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# initial call</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>212</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;self.fit(<del>func, </del>initialCall=True)</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>212</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;self.fit(<ins></ins>initialCall=True)</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>213</th><th>213</th><td class="l"><span></span> </td>
                  </tr><tr>
                          <th>214</th><th>214</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;else:</span> </td>
                  </tr><tr>
                          <th>215</th><th>215</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# continuation call</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>216</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;self.fit(<del>func, </del>x=x, f=f)</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>216</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;self.fit(<ins></ins>x=x, f=f)</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>217</th><th>217</th><td class="l"><span></span> </td>
                  </tr><tr>
                          <th>218</th><th>218</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;[xopt, fopt] = (self.xbest, self.fbest)</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://mmckerns.github.io/project/mystic/browser/branches/alta/mystic-0.1a2/mystic/snobfit_solver.py?rev=174#L220">…</a></th>
                  <th><a href="http://mmckerns.github.io/project/mystic/browser/branches/alta/mystic-0.1a2/mystic/snobfit_solver.py?rev=175#L220">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>220</th><th>220</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;for j in xrange( self.nPop ):</span> </td>
                  </tr><tr>
                          <th>221</th><th>221</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;x[j,:] = self.request[j,0:self.nDim]</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>222</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;f[j]&nbsp; &nbsp;= <del></del>func(x[j,:])</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>222</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;f[j]&nbsp; &nbsp;= <ins>self.</ins>func(x[j,:])</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>223</th><th>223</th><td class="l"><span></span> </td>
                  </tr><tr>
                          <th>224</th><th>224</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# update function call counter</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>225</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;#ncall += self.nPop&nbsp; &nbsp;<del>&nbsp;# &lt;-- original snobfit function call counter</del></span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>225</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;#ncall += self.nPop&nbsp; &nbsp;<ins></ins></span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>226</th><th>226</th><td class="l"><span></span> </td>
                  </tr><tr>
                          <th>227</th><th>227</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# best of the new function values</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://mmckerns.github.io/project/mystic/browser/branches/alta/mystic-0.1a2/mystic/snobfit_solver.py?rev=174#L232">…</a></th>
                  <th><a href="http://mmckerns.github.io/project/mystic/browser/branches/alta/mystic-0.1a2/mystic/snobfit_solver.py?rev=175#L232">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>232</th><th>232</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;fopt = fbestn</span> </td>
                  </tr><tr>
                          <th>233</th><th>233</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;xopt = x[jbest,:]</span> </td>
                  </tr>
            </tbody><tbody class="rem">
                  <tr class="first">
                          <th>234</th><th> </th><td class="l"><del></del> </td>
                  </tr><tr>
                          <th>235</th><th> </th><td class="l"><del>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;if self.callback is not None:</del> </td>
                  </tr><tr class="last">
                          <th>236</th><th> </th><td class="l"><del>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;self.callback(x[jbest])</del> </td>
                  </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>237</th><th>234</th><td class="l"><span></span> </td>
                  </tr><tr>
                          <th>238</th><th>235</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# Monitor progress</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://mmckerns.github.io/project/mystic/browser/branches/alta/mystic-0.1a2/mystic/snobfit_solver.py?rev=174#L242">…</a></th>
                  <th><a href="http://mmckerns.github.io/project/mystic/browser/branches/alta/mystic-0.1a2/mystic/snobfit_solver.py?rev=175#L239">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>242</th><th>239</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;self.popEnergy = self.f</span> </td>
                  </tr><tr>
                          <th>243</th><th>240</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;self.energy_history.append(self.bestEnergy)</span> </td>
                  </tr>
            </tbody><tbody class="add">
                  <tr class="first">
                          <th> </th><th>241</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>242</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;if self.callback is not None:</ins> </td>
                  </tr><tr>
                          <th> </th><th>243</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;#self.callback(x[jbest])</ins> </td>
                  </tr><tr class="last">
                          <th> </th><th>244</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;self.callback(self.bestSolution)</ins> </td>
                  </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>244</th><th>245</th><td class="l"><span></span> </td>
                  </tr><tr>
                          <th>245</th><th>246</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;i += 1</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://mmckerns.github.io/project/mystic/browser/branches/alta/mystic-0.1a2/mystic/snobfit_solver.py?rev=174#L270">…</a></th>
                  <th><a href="http://mmckerns.github.io/project/mystic/browser/branches/alta/mystic-0.1a2/mystic/snobfit_solver.py?rev=175#L271">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>270</th><th>271</th><td class="l"><span></span> </td>
                  </tr><tr>
                          <th>271</th><th>272</th><td class="l"><span>&nbsp; &nbsp; # Overwrite abstract_solver's SetRandomInitialPoints()</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>272</th><th> </th><td class="l"><span></span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>273</th><td class="r"><span>&nbsp; &nbsp; </span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>273</th><th>274</th><td class="l"><span>&nbsp; &nbsp; # If SetStrictRange was called first, use those bounds.</span> </td>
                  </tr><tr>
                          <th>274</th><th>275</th><td class="l"><span>&nbsp; &nbsp; # If SetInitialPoints was called first, temporarily use defaults,</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://mmckerns.github.io/project/mystic/browser/branches/alta/mystic-0.1a2/mystic/snobfit_solver.py?rev=174#L282">…</a></th>
                  <th><a href="http://mmckerns.github.io/project/mystic/browser/branches/alta/mystic-0.1a2/mystic/snobfit_solver.py?rev=175#L283">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>282</th><th>283</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; self._useStrictRange = False</span> </td>
                  </tr><tr>
                          <th>283</th><th>284</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; else:</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>284</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # Defaults copied from abstract_solver. <del>They do not make a difference</del></span> </td>
                      </tr><tr>
                        <th>285</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # <del>because </del>Solve() will re-initialize with new min and max</span> </td>
                      </tr>
                      <tr>
                        <th> </th><th>285</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # Defaults copied from abstract_solver. <ins></ins></span> </td>
                      </tr><tr class="last">
                        <th> </th><th>286</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # <ins></ins>Solve() will re-initialize with new min and max</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>286</th><th>287</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if min is None: min = [-1e3]*self.nDim&nbsp; </span> </td>
                  </tr><tr>
                          <th>287</th><th>288</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if max is None: max = [1e3]*self.nDim</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>288</th><th> </th><td class="l"><span></span> </td>
                      </tr><tr>
                        <th>289</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; self.population = self._setInitRecommendedEvalPoints(min,max)</span> </td>
                      </tr>
                      <tr>
                        <th> </th><th>289</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; self.population = self._setInitRecommendedEvalPoints(min,max) </span> </td>
                      </tr><tr>
                        <th> </th><th>290</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; print self.population</span> </td>
                      </tr><tr>
                        <th> </th><th>291</th><td class="r"><span>&nbsp; &nbsp;# def SetInitialPoints(self,x0):</span> </td>
                      </tr><tr>
                        <th> </th><th>292</th><td class="r"><span>&nbsp; &nbsp;#&nbsp; &nbsp; &nbsp;self.population = self._setInitRecommendedEvalPoints(self._strictMin,self._strictMax)</span> </td>
                      </tr><tr class="last">
                        <th> </th><th>293</th><td class="r"><span>&nbsp; &nbsp;#&nbsp; &nbsp; &nbsp;self.population[0] = x0</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>290</th><th>294</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>291</th><th> </th><td class="l"><span>#################################################################################</span> </td>
                      </tr><tr>
                        <th>292</th><th> </th><td class="l"><span></span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>295</th><td class="r"><span>############################################################################</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>293</th><th>296</th><td class="l"><span># Helper methods for SnobfitSolver</span> </td>
                  </tr><tr>
                          <th>294</th><th>297</th><td class="l"><span></span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>295</th><th> </th><td class="l"><span>&nbsp; &nbsp; def _setInitRecommendedEvalPoints(self,<del>&nbsp;min, </del>max):</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>298</th><td class="r"><span>&nbsp; &nbsp; def _setInitRecommendedEvalPoints(self,<ins>min,</ins>max):</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>296</th><th>299</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; """</span> </td>
                  </tr><tr>
                          <th>297</th><th>300</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; Snobfit's initialization of the population</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://mmckerns.github.io/project/mystic/browser/branches/alta/mystic-0.1a2/mystic/snobfit_solver.py?rev=174#L301">…</a></th>
                  <th><a href="http://mmckerns.github.io/project/mystic/browser/branches/alta/mystic-0.1a2/mystic/snobfit_solver.py?rev=175#L304">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>301</th><th>304</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;) + \</span> </td>
                  </tr><tr>
                          <th>302</th><th>305</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; numpy.array( [min] ).repeat(self.nPop,axis=0)</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>303</th><th> </th><td class="l"><span></span> </td>
                      </tr><tr>
                        <th>304</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; #x = numpy.append( [x0], x, axis=0 )</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>306</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp;# x = numpy.append( [x0], x, axis=0 )</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>305</th><th>307</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; return x</span> </td>
                  </tr><tr>
                          <th>306</th><th>308</th><td class="l"><span></span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>307</th><th> </th><td class="l"><span>&nbsp; &nbsp; def _setInitial_fdf(self<del>, func</del>):</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>309</th><td class="r"><span>&nbsp; &nbsp; def _setInitial_fdf(self<ins></ins>):</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>308</th><th>310</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; """</span> </td>
                  </tr><tr>
                          <th>309</th><th>311</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; The computation of the function values of the first set of the</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://mmckerns.github.io/project/mystic/browser/branches/alta/mystic-0.1a2/mystic/snobfit_solver.py?rev=174#L319">…</a></th>
                  <th><a href="http://mmckerns.github.io/project/mystic/browser/branches/alta/mystic-0.1a2/mystic/snobfit_solver.py?rev=175#L321">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>319</th><th>321</th><td class="l"><span></span> </td>
                  </tr><tr>
                          <th>320</th><th>322</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; for i in xrange(self.nPop):</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>321</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; f[i]&nbsp; = <del></del>func( self.x[i,:] )</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>323</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; f[i]&nbsp; = <ins>self.</ins>func( self.x[i,:] )</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>322</th><th>324</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; df[i] = max(3*self.fac, numpy.sqrt(eps))</span> </td>
                  </tr><tr>
                          <th>323</th><th>325</th><td class="l"><span></span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://mmckerns.github.io/project/mystic/browser/branches/alta/mystic-0.1a2/mystic/snobfit_solver.py?rev=174#L683">…</a></th>
                  <th><a href="http://mmckerns.github.io/project/mystic/browser/branches/alta/mystic-0.1a2/mystic/snobfit_solver.py?rev=175#L685">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>683</th><th>685</th><td class="l"><span></span> </td>
                  </tr><tr>
                          <th>684</th><th>686</th><td class="l"><span></span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>685</th><th> </th><td class="l"><span>&nbsp; &nbsp; def _calc_SplitPoint(self, j, x1, x2<del>, func</del>):</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>687</th><td class="r"><span>&nbsp; &nbsp; def _calc_SplitPoint(self, j, x1, x2<ins></ins>):</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>686</th><th>688</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; """</span> </td>
                  </tr><tr>
                          <th>687</th><th>689</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; Compute the split point</span> </td>
                  </tr><tr>
                          <th>688</th><th>690</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; """</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>689</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; _lambda = self._calc_Lambda(<del></del>func(self.x[j,:]),</span> </td>
                      </tr><tr>
                        <th>690</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <del></del>func(self.x[j+1,:])</span> </td>
                      </tr>
                      <tr>
                        <th> </th><th>691</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; _lambda = self._calc_Lambda(<ins>self.</ins>func(self.x[j,:]),</span> </td>
                      </tr><tr class="last">
                        <th> </th><th>692</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <ins>self.</ins>func(self.x[j+1,:])</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>691</th><th>693</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; )</span> </td>
                  </tr><tr>
                          <th>692</th><th>694</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; return _lambda*x1 + (1.0 - _lambda)*x2</span> </td>
                  </tr><tr>
                          <th>693</th><th>695</th><td class="l"><span></span> </td>
                  </tr><tr>
                          <th>694</th><th>696</th><td class="l"><span></span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>695</th><th> </th><td class="l"><span>&nbsp; &nbsp; def _split(self, x, f, df, xl0, xu0, nspl<del>, func</del>):</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>697</th><td class="r"><span>&nbsp; &nbsp; def _split(self, x, f, df, xl0, xu0, nspl<ins></ins>):</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>696</th><th>698</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; """ Split a box</span> </td>
                  </tr><tr>
                          <th>697</th><th>699</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://mmckerns.github.io/project/mystic/browser/branches/alta/mystic-0.1a2/mystic/snobfit_solver.py?rev=174#L764">…</a></th>
                  <th><a href="http://mmckerns.github.io/project/mystic/browser/branches/alta/mystic-0.1a2/mystic/snobfit_solver.py?rev=175#L766">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>764</th><th>766</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; j = numpy.argmax( y[1:len(y)]-y[0:len(y)-1] )</span> </td>
                  </tr><tr>
                          <th>765</th><th>767</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; if self.constraint is None:</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>766</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;ymid = self._calc_SplitPoint(j, y[j], y[j+1]<del>, func</del>)</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>768</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;ymid = self._calc_SplitPoint(j, y[j], y[j+1]<ins></ins>)</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>767</th><th>769</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; else:</span> </td>
                  </tr><tr>
                          <th>768</th><th>770</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;ymid = 0.5*(y[j]+y[j+1])</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://mmckerns.github.io/project/mystic/browser/branches/alta/mystic-0.1a2/mystic/snobfit_solver.py?rev=174#L804">…</a></th>
                  <th><a href="http://mmckerns.github.io/project/mystic/browser/branches/alta/mystic-0.1a2/mystic/snobfit_solver.py?rev=175#L806">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>804</th><th>806</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; k = numpy.argmax( d )</span> </td>
                  </tr><tr>
                          <th>805</th><th>807</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if self.constraint is None:</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>806</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;ymid = self._calc_SplitPoint(k, y[k], y[k+1]<del>, func</del>)</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>808</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;ymid = self._calc_SplitPoint(k, y[k], y[k+1]<ins></ins>)</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>807</th><th>809</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; else:</span> </td>
                  </tr><tr>
                          <th>808</th><th>810</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;ymid = 0.5*(y[k] + y[k+1]) </span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://mmckerns.github.io/project/mystic/browser/branches/alta/mystic-0.1a2/mystic/snobfit_solver.py?rev=174#L984">…</a></th>
                  <th><a href="http://mmckerns.github.io/project/mystic/browser/branches/alta/mystic-0.1a2/mystic/snobfit_solver.py?rev=175#L986">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>984</th><th>986</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;fnew, # new function values and</span> </td>
                  </tr><tr>
                          <th>985</th><th>987</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;dfnew, # their variations</span> </td>
                  </tr>
            </tbody><tbody class="rem">
                  <tr class="last first">
                          <th>986</th><th> </th><td class="l"><del>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;func</del> </td>
                  </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>987</th><th>988</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;):</span> </td>
                  </tr><tr>
                          <th>988</th><th>989</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; """</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://mmckerns.github.io/project/mystic/browser/branches/alta/mystic-0.1a2/mystic/snobfit_solver.py?rev=174#L1130">…</a></th>
                  <th><a href="http://mmckerns.github.io/project/mystic/browser/branches/alta/mystic-0.1a2/mystic/snobfit_solver.py?rev=175#L1131">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>1130</th><th>1131</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;xl[j,:],</span> </td>
                  </tr><tr>
                          <th>1131</th><th>1132</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;xu[j,:],</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>1132</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;self.nsplit[j,:],</span> </td>
                      </tr><tr>
                        <th>1133</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;func</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>1133</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;self.nsplit[j,:]</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>1134</th><th>1134</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;)</span> </td>
                  </tr><tr>
                          <th>1135</th><th>1135</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; k = self._sumFind( x0 == \</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://mmckerns.github.io/project/mystic/browser/branches/alta/mystic-0.1a2/mystic/snobfit_solver.py?rev=174#L1341">…</a></th>
                  <th><a href="http://mmckerns.github.io/project/mystic/browser/branches/alta/mystic-0.1a2/mystic/snobfit_solver.py?rev=175#L1341">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>1341</th><th>1341</th><td class="l"><span>&nbsp; &nbsp; # Step 3</span> </td>
                  </tr><tr>
                          <th>1342</th><th>1342</th><td class="l"><span>&nbsp; &nbsp; #------------------------------------</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>1343</th><th> </th><td class="l"><span>&nbsp; &nbsp; def branch(self<del>, func</del>):</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>1343</th><td class="r"><span>&nbsp; &nbsp; def branch(self<ins></ins>):</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>1344</th><th>1344</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; """</span> </td>
                  </tr><tr>
                          <th>1345</th><th>1345</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; All current boxes containing more than one point are split</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://mmckerns.github.io/project/mystic/browser/branches/alta/mystic-0.1a2/mystic/snobfit_solver.py?rev=174#L1357">…</a></th>
                  <th><a href="http://mmckerns.github.io/project/mystic/browser/branches/alta/mystic-0.1a2/mystic/snobfit_solver.py?rev=175#L1357">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>1357</th><th>1357</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; self.u,</span> </td>
                  </tr><tr>
                          <th>1358</th><th>1358</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; self.v,</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>1359</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; numpy.zeros( self.nDim),</span> </td>
                      </tr><tr>
                        <th>1360</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; func</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>1359</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; numpy.zeros( self.nDim)</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>1361</th><th>1360</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; )</span> </td>
                  </tr><tr>
                          <th>1362</th><th>1361</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; else:</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://mmckerns.github.io/project/mystic/browser/branches/alta/mystic-0.1a2/mystic/snobfit_solver.py?rev=174#L1538">…</a></th>
                  <th><a href="http://mmckerns.github.io/project/mystic/browser/branches/alta/mystic-0.1a2/mystic/snobfit_solver.py?rev=175#L1537">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>1538</th><th>1537</th><td class="l"><span></span> </td>
                  </tr><tr>
                          <th>1539</th><th>1538</th><td class="l"><span></span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>1540</th><th> </th><td class="l"><span>&nbsp; &nbsp; def updateWorkspace(self<del>, func</del>):</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>1539</th><td class="r"><span>&nbsp; &nbsp; def updateWorkspace(self<ins></ins>):</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>1541</th><th>1540</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; """ update the current work space """</span> </td>
                  </tr><tr>
                          <th>1542</th><th>1541</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; oldxbest = self.xbest</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://mmckerns.github.io/project/mystic/browser/branches/alta/mystic-0.1a2/mystic/snobfit_solver.py?rev=174#L1547">…</a></th>
                  <th><a href="http://mmckerns.github.io/project/mystic/browser/branches/alta/mystic-0.1a2/mystic/snobfit_solver.py?rev=175#L1546">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>1547</th><th>1546</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;self.xnew,</span> </td>
                  </tr><tr>
                          <th>1548</th><th>1547</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;self.fnew,</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>1549</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;self.dfnew,</span> </td>
                      </tr><tr>
                        <th>1550</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;func</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>1548</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;self.dfnew</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>1551</th><th>1549</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;)</span> </td>
                  </tr><tr>
                          <th>1552</th><th>1550</th><td class="l"><span></span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://mmckerns.github.io/project/mystic/browser/branches/alta/mystic-0.1a2/mystic/snobfit_solver.py?rev=174#L2110">…</a></th>
                  <th><a href="http://mmckerns.github.io/project/mystic/browser/branches/alta/mystic-0.1a2/mystic/snobfit_solver.py?rev=175#L2108">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>2110</th><th>2108</th><td class="l"><span></span> </td>
                  </tr><tr>
                          <th>2111</th><th>2109</th><td class="l"><span></span> </td>
                  </tr>
            </tbody><tbody class="rem">
                  <tr class="first">
                          <th>2112</th><th> </th><td class="l"><del>&nbsp; &nbsp; def _q(self, f, f0, Delta):</del> </td>
                  </tr><tr>
                          <th>2113</th><th> </th><td class="l"><del>&nbsp; &nbsp; &nbsp; &nbsp; return ( f - f0 ) / ( Delta + abs(f - f0) )</del> </td>
                  </tr><tr>
                          <th>2114</th><th> </th><td class="l"><del></del> </td>
                  </tr><tr>
                          <th>2115</th><th> </th><td class="l"><del>&nbsp; &nbsp; </del> </td>
                  </tr><tr class="last">
                          <th>2116</th><th> </th><td class="l"><del></del> </td>
                  </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>2117</th><th>2110</th><td class="l"><span>&nbsp; &nbsp; # -----------------------------------------------------------------</span> </td>
                  </tr><tr>
                          <th>2118</th><th>2111</th><td class="l"><span></span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>2119</th><th> </th><td class="l"><span>&nbsp; &nbsp; def fit(self, <del>func, </del>x=None, f=None, df=None, initialCall=False):</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>2112</th><td class="r"><span>&nbsp; &nbsp; def fit(self, <ins></ins>x=None, f=None, df=None, initialCall=False):</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>2120</th><th>2113</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; """</span> </td>
                  </tr><tr>
                          <th>2121</th><th>2114</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; One call of snobfit</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://mmckerns.github.io/project/mystic/browser/branches/alta/mystic-0.1a2/mystic/snobfit_solver.py?rev=174#L2141">…</a></th>
                  <th><a href="http://mmckerns.github.io/project/mystic/browser/branches/alta/mystic-0.1a2/mystic/snobfit_solver.py?rev=175#L2134">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>2141</th><th>2134</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; self.update_uv()&nbsp; &nbsp; &nbsp;# Step 1</span> </td>
                  </tr><tr>
                          <th>2142</th><th>2135</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; self.update_input()&nbsp; # Step 2</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>2143</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; self.branch(<del>func</del>)&nbsp; &nbsp; &nbsp; &nbsp; # step 3</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>2136</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; self.branch(<ins></ins>)&nbsp; &nbsp; &nbsp; &nbsp; # step 3</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>2144</th><th>2137</th><td class="l"><span></span> </td>
                  </tr><tr>
                          <th>2145</th><th>2138</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (fmax, fmin) = self._getExtrmeFunc()</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://mmckerns.github.io/project/mystic/browser/branches/alta/mystic-0.1a2/mystic/snobfit_solver.py?rev=174#L2162">…</a></th>
                  <th><a href="http://mmckerns.github.io/project/mystic/browser/branches/alta/mystic-0.1a2/mystic/snobfit_solver.py?rev=175#L2155">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>2162</th><th>2155</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;self.dfnew = numpy.ones(len(f))*max(3*self.fac,numpy.sqrt(eps))</span> </td>
                  </tr><tr>
                          <th>2163</th><th>2156</th><td class="l"><span></span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>2164</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; self.updateWorkspace(<del>func</del>)</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>2157</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; self.updateWorkspace(<ins></ins>)</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>2165</th><th>2158</th><td class="l"><span></span> </td>
                  </tr><tr>
                          <th>2166</th><th>2159</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if&nbsp; isEmpty(self.near): # This is equal go to Step 11</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://mmckerns.github.io/project/mystic/browser/branches/alta/mystic-0.1a2/mystic/snobfit_solver.py?rev=174#L2187">…</a></th>
                  <th><a href="http://mmckerns.github.io/project/mystic/browser/branches/alta/mystic-0.1a2/mystic/snobfit_solver.py?rev=175#L2180">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>2187</th><th>2180</th><td class="l"><span># matrix, uncertainty:</span> </td>
                  </tr><tr>
                          <th>2188</th><th>2181</th><td class="l"><span># Note: uncertainty() sometimes returns NaN or causes errors....</span> </td>
                  </tr>
            </tbody><tbody class="add">
                  <tr class="first">
                          <th> </th><th>2182</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>2183</th><td class="r"><ins>&nbsp; &nbsp; def _q(self, f, f0, Delta):</ins> </td>
                  </tr><tr class="last">
                          <th> </th><th>2184</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; return ( f - f0 ) / ( Delta + abs(f - f0) )</ins> </td>
                  </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>2189</th><th>2185</th><td class="l"><span></span> </td>
                  </tr><tr>
                          <th>2190</th><th>2186</th><td class="l"><span>&nbsp; &nbsp; def _calcCovarAtSolution(self, x, f, df=None):</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://mmckerns.github.io/project/mystic/browser/branches/alta/mystic-0.1a2/mystic/snobfit_solver.py?rev=174#L2202">…</a></th>
                  <th><a href="http://mmckerns.github.io/project/mystic/browser/branches/alta/mystic-0.1a2/mystic/snobfit_solver.py?rev=175#L2198">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>2202</th><th>2198</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; self.dfnew = numpy.ones(len(f))*max(3*self.fac,numpy.sqrt(eps))</span> </td>
                  </tr><tr>
                          <th>2203</th><th>2199</th><td class="l"><span></span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>2204</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; self.updateWorkspace(<del>self.func</del>)</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>2200</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; self.updateWorkspace(<ins></ins>)</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>2205</th><th>2201</th><td class="l"><span></span> </td>
                  </tr><tr>
                          <th>2206</th><th>2202</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; # Current best solution</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://mmckerns.github.io/project/mystic/browser/branches/alta/mystic-0.1a2/mystic/snobfit_solver.py?rev=174#L2304">…</a></th>
                  <th><a href="http://mmckerns.github.io/project/mystic/browser/branches/alta/mystic-0.1a2/mystic/snobfit_solver.py?rev=175#L2300">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>2304</th><th>2300</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; return uct</span> </td>
                  </tr><tr>
                          <th>2305</th><th>2301</th><td class="l"><span></span> </td>
                  </tr>
            </tbody><tbody class="rem">
                  <tr class="first">
                          <th>2306</th><th> </th><td class="l"><del></del> </td>
                  </tr><tr class="last">
                          <th>2307</th><th> </th><td class="l"><del></del> </td>
                  </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>2308</th><th>2302</th><td class="l"><span>###############################################################################</span> </td>
                  </tr><tr>
                          <th>2309</th><th>2303</th><td class="l"><span># If using an instance of SoftConstraints (constraint is not None),</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://mmckerns.github.io/project/mystic/browser/branches/alta/mystic-0.1a2/mystic/snobfit_solver.py?rev=174#L2343">…</a></th>
                  <th><a href="http://mmckerns.github.io/project/mystic/browser/branches/alta/mystic-0.1a2/mystic/snobfit_solver.py?rev=175#L2337">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>2343</th><th>2337</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; self.p = 0.5</span> </td>
                  </tr><tr>
                          <th>2344</th><th>2338</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; self.fac = 0.0</span> </td>
                  </tr>
            </tbody><tbody class="add">
                  <tr class="first">
                          <th> </th><th>2339</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; self.disp = 0</ins> </td>
                  </tr><tr>
                          <th> </th><th>2340</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; self.callback = None</ins> </td>
                  </tr><tr>
                          <th> </th><th>2341</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>2342</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; # Fix me? SnobfitSoftSolver requires fglob to be entered in both </ins> </td>
                  </tr><tr class="last">
                          <th> </th><th>2343</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; # termination and Solve()....</ins> </td>
                  </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>2345</th><th>2344</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; self.fglob = 0</span> </td>
                  </tr>
            </tbody><tbody class="rem">
                  <tr class="first">
                          <th>2346</th><th> </th><td class="l"><del>&nbsp; &nbsp; &nbsp; &nbsp; self.disp = False</del> </td>
                  </tr><tr class="last">
                          <th>2347</th><th> </th><td class="l"><del>&nbsp; &nbsp; &nbsp; &nbsp; self.callback = None</del> </td>
                  </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>2348</th><th>2345</th><td class="l"><span></span> </td>
                  </tr><tr>
                          <th>2349</th><th>2346</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; # Initialize some variables depending on input</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://mmckerns.github.io/project/mystic/browser/branches/alta/mystic-0.1a2/mystic/snobfit_solver.py?rev=174#L2351">…</a></th>
                  <th><a href="http://mmckerns.github.io/project/mystic/browser/branches/alta/mystic-0.1a2/mystic/snobfit_solver.py?rev=175#L2348">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>2351</th><th>2348</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; if kwds.has_key('fac'): self.fac = kwds['fac']</span> </td>
                  </tr><tr>
                          <th>2352</th><th>2349</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; if kwds.has_key('fglob'): self.fglob = kwds['fglob']</span> </td>
                  </tr>
            </tbody><tbody class="add">
                  <tr class="last first">
                          <th> </th><th>2350</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; if kwds.has_key('callback'): self.callback = kwds['callback']</ins> </td>
                  </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>2353</th><th>2351</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; if kwds.has_key('disp'): self.disp = kwds['disp']</span> </td>
                  </tr>
            </tbody><tbody class="rem">
                  <tr class="last first">
                          <th>2354</th><th> </th><td class="l"><del>&nbsp; &nbsp; &nbsp; &nbsp; if kwds.has_key('callback'): self.callback = kwds['callback']</del> </td>
                  </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>2355</th><th>2352</th><td class="l"><span></span> </td>
                  </tr><tr>
                          <th>2356</th><th>2353</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; # SoftConstraints requires a constraint passed to Solve()....</span> </td>
                  </tr><tr>
                          <th>2357</th><th>2354</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; if kwds.has_key('constraint'): self.constraint = kwds['constraint']</span> </td>
                  </tr>
            </tbody><tbody class="add">
                  <tr class="first">
                          <th> </th><th>2355</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>2356</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; # Make func an instance variable</ins> </td>
                  </tr><tr class="last">
                          <th> </th><th>2357</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; self.func = func</ins> </td>
                  </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>2358</th><th>2358</th><td class="l"><span></span> </td>
                  </tr><tr>
                          <th>2359</th><th>2359</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; #-------------------------------------------------------------</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://mmckerns.github.io/project/mystic/browser/branches/alta/mystic-0.1a2/mystic/snobfit_solver.py?rev=174#L2361">…</a></th>
                  <th><a href="http://mmckerns.github.io/project/mystic/browser/branches/alta/mystic-0.1a2/mystic/snobfit_solver.py?rev=175#L2361">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>2361</th><th>2361</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; self._EARLYEXIT = False</span> </td>
                  </tr><tr>
                          <th>2362</th><th>2362</th><td class="l"><span></span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>2363</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; fcalls, <del>func = wrap_function(</del>func, ExtraArgs, EvaluationMonitor)</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>2363</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; fcalls, <ins>self.func = wrap_function(self.</ins>func, ExtraArgs, EvaluationMonitor)</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>2364</th><th>2364</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; if self._useStrictRange:</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>2365</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <del>#</del>for i in range(self.nPop):</span> </td>
                      </tr><tr>
                        <th>2366</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <del>#</del>&nbsp; &nbsp; self.population[i] = self._clipGuessWithinRangeBoundary(self.population[i])</span> </td>
                      </tr><tr>
                        <th>2367</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <del>#func = wrap_bounds(</del>func, self._strictMin, self._strictMax)</span> </td>
                      </tr>
                      <tr>
                        <th> </th><th>2365</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <ins></ins>for i in range(self.nPop):</span> </td>
                      </tr><tr>
                        <th> </th><th>2366</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <ins></ins>&nbsp; &nbsp; self.population[i] = self._clipGuessWithinRangeBoundary(self.population[i])</span> </td>
                      </tr><tr class="last">
                        <th> </th><th>2367</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <ins>self.func = wrap_bounds(self.</ins>func, self._strictMin, self._strictMax)</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>2368</th><th>2368</th><td class="l"><span></span> </td>
                  </tr><tr>
                          <th>2369</th><th>2369</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # Fix for when bounds were set after initial points. </span> </td>
                  </tr>
            </tbody><tbody class="rem">
                  <tr class="first">
                          <th>2370</th><th> </th><td class="l"><del>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # Snobfit's initialization uses the bounds not just for clipping, so </del> </td>
                  </tr><tr>
                          <th>2371</th><th> </th><td class="l"><del>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # the above code wouldn't really be quite right.</del> </td>
                  </tr><tr>
                          <th>2372</th><th> </th><td class="l"><del>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # Problem with this: what if SetRandomInitialPoints was called and </del> </td>
                  </tr><tr class="last">
                          <th>2373</th><th> </th><td class="l"><del>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # the self.population[0] was something weird?</del> </td>
                  </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>2374</th><th>2370</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; x0 = self.population[0]</span> </td>
                  </tr><tr>
                          <th>2375</th><th>2371</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; self.SetInitialPoints(x0)</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://mmckerns.github.io/project/mystic/browser/branches/alta/mystic-0.1a2/mystic/snobfit_solver.py?rev=174#L2390">…</a></th>
                  <th><a href="http://mmckerns.github.io/project/mystic/browser/branches/alta/mystic-0.1a2/mystic/snobfit_solver.py?rev=175#L2386">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>2390</th><th>2386</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; # Other initialization</span> </td>
                  </tr><tr>
                          <th>2391</th><th>2387</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; self.x = self.population</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>2392</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; (self.f, self.df) = self._setInitial_fdf(<del>func</del>)</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>2388</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; (self.f, self.df) = self._setInitial_fdf(<ins></ins>)</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>2393</th><th>2389</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; self.nx = self.x.shape[0]</span> </td>
                  </tr><tr>
                          <th>2394</th><th>2390</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; self.setInit()&nbsp; &nbsp;</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://mmckerns.github.io/project/mystic/browser/branches/alta/mystic-0.1a2/mystic/snobfit_solver.py?rev=174#L2402">…</a></th>
                  <th><a href="http://mmckerns.github.io/project/mystic/browser/branches/alta/mystic-0.1a2/mystic/snobfit_solver.py?rev=175#L2398">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>2402</th><th>2398</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; # Function call counter</span> </td>
                  </tr><tr>
                          <th>2403</th><th>2399</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; #ncall = self.nPop</span> </td>
                  </tr>
            </tbody><tbody class="rem">
                  <tr class="last first">
                          <th>2404</th><th> </th><td class="l"><del>&nbsp; &nbsp; &nbsp; &nbsp; initfcalls = fcalls[0]</del> </td>
                  </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>2405</th><th>2400</th><td class="l"><span></span> </td>
                  </tr><tr>
                          <th>2406</th><th>2401</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; xopt&nbsp; = inf</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://mmckerns.github.io/project/mystic/browser/branches/alta/mystic-0.1a2/mystic/snobfit_solver.py?rev=174#L2414">…</a></th>
                  <th><a href="http://mmckerns.github.io/project/mystic/browser/branches/alta/mystic-0.1a2/mystic/snobfit_solver.py?rev=175#L2409">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>2414</th><th>2409</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; _f = vector( self.nPop )</span> </td>
                  </tr><tr>
                          <th>2415</th><th>2410</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; for j in xrange( self.nPop ):</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>2416</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; _f[j] = <del></del>func( _x[j] )</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>2411</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; _f[j] = <ins>self.</ins>func( _x[j] )</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>2417</th><th>2412</th><td class="l"><span></span> </td>
                  </tr><tr>
                          <th>2418</th><th>2413</th><td class="l"><span></span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://mmckerns.github.io/project/mystic/browser/branches/alta/mystic-0.1a2/mystic/snobfit_solver.py?rev=174#L2436">…</a></th>
                  <th><a href="http://mmckerns.github.io/project/mystic/browser/branches/alta/mystic-0.1a2/mystic/snobfit_solver.py?rev=175#L2431">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>2436</th><th>2431</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; self.bestEnergy = self._init_popEnergy</span> </td>
                  </tr><tr>
                          <th>2437</th><th>2432</th><td class="l"><span></span> </td>
                  </tr>
            </tbody><tbody class="add">
                  <tr class="first">
                          <th> </th><th>2433</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; initfcalls = fcalls[0]</ins> </td>
                  </tr><tr class="last">
                          <th> </th><th>2434</th><td class="r"><ins></ins> </td>
                  </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>2438</th><th>2435</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; # Repeat until the limit on function calls is reached</span> </td>
                  </tr><tr>
                          <th>2439</th><th>2436</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; #while ncall &lt; self._maxiter:</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://mmckerns.github.io/project/mystic/browser/branches/alta/mystic-0.1a2/mystic/snobfit_solver.py?rev=174#L2445">…</a></th>
                  <th><a href="http://mmckerns.github.io/project/mystic/browser/branches/alta/mystic-0.1a2/mystic/snobfit_solver.py?rev=175#L2442">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>2445</th><th>2442</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;if fcalls[0] == initfcalls:</span> </td>
                  </tr><tr>
                          <th>2446</th><th>2443</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# initial call</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>2447</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;self.fit(<del>func, </del>initialCall=True)</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>2444</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;self.fit(<ins></ins>initialCall=True)</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>2448</th><th>2445</th><td class="l"><span></span> </td>
                  </tr><tr>
                          <th>2449</th><th>2446</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;else:</span> </td>
                  </tr><tr>
                          <th>2450</th><th>2447</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# continuation call</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>2451</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;self.fit(<del>func, </del>x=x, f=fm)</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>2448</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;self.fit(<ins></ins>x=x, f=fm)</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>2452</th><th>2449</th><td class="l"><span></span> </td>
                  </tr><tr>
                          <th>2453</th><th>2450</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;[xopt, fopt] = (self.xbest, self.fbest)</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://mmckerns.github.io/project/mystic/browser/branches/alta/mystic-0.1a2/mystic/snobfit_solver.py?rev=174#L2459">…</a></th>
                  <th><a href="http://mmckerns.github.io/project/mystic/browser/branches/alta/mystic-0.1a2/mystic/snobfit_solver.py?rev=175#L2456">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>2459</th><th>2456</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;for j in xrange( self.nPop ):</span> </td>
                  </tr><tr>
                          <th>2460</th><th>2457</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;x[j,:] = self.request[j,0:self.nDim]</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>2461</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;f[j]&nbsp; &nbsp;= <del></del>func(x[j,:])</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>2458</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;f[j]&nbsp; &nbsp;= <ins>self.</ins>func(x[j,:])</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>2462</th><th>2459</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;FF&nbsp; &nbsp; = self.constraint.F(x[j,:])</span> </td>
                  </tr><tr>
                          <th>2463</th><th>2460</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;F[j]&nbsp; = FF</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://mmckerns.github.io/project/mystic/browser/branches/alta/mystic-0.1a2/mystic/snobfit_solver.py?rev=174#L2496">…</a></th>
                  <th><a href="http://mmckerns.github.io/project/mystic/browser/branches/alta/mystic-0.1a2/mystic/snobfit_solver.py?rev=175#L2493">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>2496</th><th>2493</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;fopt = fbestn</span> </td>
                  </tr><tr>
                          <th>2497</th><th>2494</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;xopt = x[jbest,:]</span> </td>
                  </tr>
            </tbody><tbody class="rem">
                  <tr class="first">
                          <th>2498</th><th> </th><td class="l"><del></del> </td>
                  </tr><tr>
                          <th>2499</th><th> </th><td class="l"><del>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;if&nbsp; self.callback is not None :</del> </td>
                  </tr><tr class="last">
                          <th>2500</th><th> </th><td class="l"><del>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;self.callback(x[jbest])</del> </td>
                  </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>2501</th><th>2495</th><td class="l"><span></span> </td>
                  </tr><tr>
                          <th>2502</th><th>2496</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;if&nbsp; fopt &lt; 0 and change == 0:</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://mmckerns.github.io/project/mystic/browser/branches/alta/mystic-0.1a2/mystic/snobfit_solver.py?rev=174#L2517">…</a></th>
                  <th><a href="http://mmckerns.github.io/project/mystic/browser/branches/alta/mystic-0.1a2/mystic/snobfit_solver.py?rev=175#L2511">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>2517</th><th>2511</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;x = _x.copy()</span> </td>
                  </tr><tr>
                          <th>2518</th><th>2512</th><td class="l"><span></span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>2519</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;_fopt = <del></del>func(xopt)</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>2513</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;_fopt = <ins>self.</ins>func(xopt)</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>2520</th><th>2514</th><td class="l"><span></span> </td>
                  </tr><tr>
                          <th>2521</th><th>2515</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# Monitor progress</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://mmckerns.github.io/project/mystic/browser/branches/alta/mystic-0.1a2/mystic/snobfit_solver.py?rev=174#L2526">…</a></th>
                  <th><a href="http://mmckerns.github.io/project/mystic/browser/branches/alta/mystic-0.1a2/mystic/snobfit_solver.py?rev=175#L2520">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>2526</th><th>2520</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;self.energy_history.append(self.bestEnergy)</span> </td>
                  </tr><tr>
                          <th>2527</th><th>2521</th><td class="l"><span></span> </td>
                  </tr>
            </tbody><tbody class="add">
                  <tr class="first">
                          <th> </th><th>2522</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;if&nbsp; self.callback is not None :</ins> </td>
                  </tr><tr>
                          <th> </th><th>2523</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;#self.callback(x[jbest])</ins> </td>
                  </tr><tr>
                          <th> </th><th>2524</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;self.callback(self.bestSolution)</ins> </td>
                  </tr><tr class="last">
                          <th> </th><th>2525</th><td class="r"><ins></ins> </td>
                  </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>2528</th><th>2526</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;i+=1</span> </td>
                  </tr><tr>
                          <th>2529</th><th>2527</th><td class="l"><span></span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://mmckerns.github.io/project/mystic/browser/branches/alta/mystic-0.1a2/mystic/snobfit_solver.py?rev=174#L2531">…</a></th>
                  <th><a href="http://mmckerns.github.io/project/mystic/browser/branches/alta/mystic-0.1a2/mystic/snobfit_solver.py?rev=175#L2529">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>2531</th><th>2529</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;break</span> </td>
                  </tr><tr>
                          <th>2532</th><th>2530</th><td class="l"><span></span> </td>
                  </tr>
            </tbody><tbody class="rem">
                  <tr class="last first">
                          <th>2533</th><th> </th><td class="l"><del>&nbsp; &nbsp; &nbsp; &nbsp; import signal</del> </td>
                  </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>2534</th><th>2531</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; self.generations = i</span> </td>
                  </tr><tr>
                          <th>2535</th><th>2532</th><td class="l"><span></span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://mmckerns.github.io/project/mystic/browser/branches/alta/mystic-0.1a2/mystic/snobfit_solver.py?rev=174#L2538">…</a></th>
                  <th><a href="http://mmckerns.github.io/project/mystic/browser/branches/alta/mystic-0.1a2/mystic/snobfit_solver.py?rev=175#L2535">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>2538</th><th>2535</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; # code below here pushes output to scipy.optimize interface</span> </td>
                  </tr><tr>
                          <th>2539</th><th>2536</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; fval = self.bestEnergy</span> </td>
                  </tr>
            </tbody><tbody class="rem">
                  <tr class="last first">
                          <th>2540</th><th> </th><td class="l"><del>&nbsp; &nbsp; &nbsp; &nbsp; warnflag = 0</del> </td>
                  </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>2541</th><th>2537</th><td class="l"><span></span> </td>
                  </tr><tr>
                          <th>2542</th><th>2538</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; if fcalls[0] &gt;= self._maxfun:</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://mmckerns.github.io/project/mystic/browser/branches/alta/mystic-0.1a2/mystic/snobfit_solver.py?rev=174#L2688">…</a></th>
                  <th><a href="http://mmckerns.github.io/project/mystic/browser/branches/alta/mystic-0.1a2/mystic/snobfit_solver.py?rev=175#L2684">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>2688</th><th>2684</th><td class="l"><span>&nbsp; &nbsp; uncertainty -- list - Returned if retuct is True. The uncertainty of </span> </td>
                  </tr><tr>
                          <th>2689</th><th>2685</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;the fitting parameters.</span> </td>
                  </tr>
            </tbody><tbody class="rem">
                  <tr class="last first">
                          <th>2690</th><th> </th><td class="l"><del></del> </td>
                  </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>2691</th><th>2686</th><td class="l"><span>&nbsp; &nbsp; """</span> </td>
                  </tr><tr>
                          <th>2692</th><th>2687</th><td class="l"><span></span> </td>
                  </tr><tr>
                          <th>2693</th><th>2688</th><td class="l"><span>&nbsp; &nbsp; from mystic.tools import Sow</span> </td>
                  </tr>
            </tbody><tbody class="add">
                  <tr class="first">
                          <th> </th><th>2689</th><td class="r"><ins>&nbsp; &nbsp; from mystic.termination import FglobTermination, VTRChangeOverGenerations</ins> </td>
                  </tr><tr class="last">
                          <th> </th><th>2690</th><td class="r"><ins></ins> </td>
                  </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>2694</th><th>2691</th><td class="l"><span>&nbsp; &nbsp; stepmon = Sow()</span> </td>
                  </tr><tr>
                          <th>2695</th><th>2692</th><td class="l"><span>&nbsp; &nbsp; evalmon = Sow()</span> </td>
                  </tr>
            </tbody><tbody class="rem">
                  <tr class="last first">
                          <th>2696</th><th> </th><td class="l"><del>&nbsp; &nbsp; from mystic.termination import SnobfitTermination</del> </td>
                  </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>2697</th><th>2693</th><td class="l"><span></span> </td>
                  </tr><tr>
                          <th>2698</th><th>2694</th><td class="l"><span>&nbsp; &nbsp; if constraint is None:</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://mmckerns.github.io/project/mystic/browser/branches/alta/mystic-0.1a2/mystic/snobfit_solver.py?rev=174#L2707">…</a></th>
                  <th><a href="http://mmckerns.github.io/project/mystic/browser/branches/alta/mystic-0.1a2/mystic/snobfit_solver.py?rev=175#L2703">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>2707</th><th>2703</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; solver = SnobfitSoftSolver(len(x0))</span> </td>
                  </tr><tr>
                          <th>2708</th><th>2704</th><td class="l"><span></span> </td>
                  </tr>
            </tbody><tbody class="add">
                  <tr class="first">
                          <th> </th><th>2705</th><td class="r"><ins>&nbsp; &nbsp; if fglob != 0:</ins> </td>
                  </tr><tr>
                          <th> </th><th>2706</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; termination = FglobTermination(fglob=fglob, tolerance=rtol, generations=nstop)</ins> </td>
                  </tr><tr>
                          <th> </th><th>2707</th><td class="r"><ins>&nbsp; &nbsp; else:</ins> </td>
                  </tr><tr>
                          <th> </th><th>2708</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; termination = VTRChangeOverGenerations(costtolerance=ftol, gentolerance=0,\</ins> </td>
                  </tr><tr>
                          <th> </th><th>2709</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;generations=nstop)</ins> </td>
                  </tr><tr class="last">
                          <th> </th><th>2710</th><td class="r"><ins></ins> </td>
                  </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>2709</th><th>2711</th><td class="l"><span>&nbsp; &nbsp; # Bounds are required</span> </td>
                  </tr><tr>
                          <th>2710</th><th>2712</th><td class="l"><span>&nbsp; &nbsp; solver.SetStrictRanges(bounds[0],bounds[1])</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://mmckerns.github.io/project/mystic/browser/branches/alta/mystic-0.1a2/mystic/snobfit_solver.py?rev=174#L2712">…</a></th>
                  <th><a href="http://mmckerns.github.io/project/mystic/browser/branches/alta/mystic-0.1a2/mystic/snobfit_solver.py?rev=175#L2714">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>2712</th><th>2714</th><td class="l"><span>&nbsp; &nbsp; solver.enable_signal_handler()</span> </td>
                  </tr><tr>
                          <th>2713</th><th>2715</th><td class="l"><span>&nbsp; &nbsp; solver.SetEvaluationLimits(maxiter,maxfun)</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>2714</th><th> </th><td class="l"><span>&nbsp; &nbsp; solver.Solve(func,termination<del>=SnobfitTermination(rtol, ftol, nstop)</del>,\</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>2716</th><td class="r"><span>&nbsp; &nbsp; solver.Solve(func,termination<ins></ins>,\</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>2715</th><th>2717</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;EvaluationMonitor=evalmon,StepMonitor=stepmon,\</span> </td>
                  </tr><tr>
                          <th>2716</th><th>2718</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;ExtraArgs=args,disp=disp, callback=callback,\</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://mmckerns.github.io/project/mystic/browser/branches/alta/mystic-0.1a2/mystic/snobfit_solver.py?rev=174#L2721">…</a></th>
                  <th><a href="http://mmckerns.github.io/project/mystic/browser/branches/alta/mystic-0.1a2/mystic/snobfit_solver.py?rev=175#L2723">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>2721</th><th>2723</th><td class="l"><span>&nbsp; &nbsp; fval = solver.bestEnergy</span> </td>
                  </tr><tr>
                          <th>2722</th><th>2724</th><td class="l"><span>&nbsp; &nbsp; warnflag = 0</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>2723</th><th> </th><td class="l"><span>&nbsp; &nbsp; fcalls = len(evalmon.x)<del>&nbsp; # Different from ncalls of original snobfit</del></span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>2725</th><td class="r"><span>&nbsp; &nbsp; fcalls = len(evalmon.x)<ins></ins></span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>2724</th><th>2726</th><td class="l"><span>&nbsp; &nbsp; iterations = len(stepmon.x)</span> </td>
                  </tr><tr>
                          <th>2725</th><th>2727</th><td class="l"><span>&nbsp; &nbsp; allvecs = []</span> </td>
                  </tr>
            </tbody>
        </table>
      </li>
      <li class="entry">
        <h2 id="file2">
          <a href="175/branches/alta/mystic-0.1a2/mystic/termination.html" title="Show the changeset 175 restricted to branches/alta/mystic-0.1a2/mystic/termination.py">branches/alta/mystic-0.1a2/mystic/termination.py</a>
        </h2>
        <table class="trac-diff inline" summary="Differences" cellspacing="0">
              <colgroup><col class="lineno" /><col class="lineno" /><col class="content" /></colgroup>
              <thead>
                <tr>
                  <th title="Revision 169">
                    <a title="Show revision 169 of this file in browser" href="http://mmckerns.github.io/project/mystic/browser/branches/alta/mystic-0.1a2/mystic/termination.py?rev=169#L60">
                      r169</a>
                  </th>
                  <th title="Revision 175">
                    <a title="Show revision 175 of this file in browser" href="http://mmckerns.github.io/project/mystic/browser/branches/alta/mystic-0.1a2/mystic/termination.py?rev=175#L60">
                      r175</a>
                  </th>
                  <td> </td>
                </tr>
              </thead>
            <tbody class="unmod">
                  <tr>
                          <th>60</th><th>60</th><td class="l"><span>&nbsp; &nbsp; return _</span> </td>
                  </tr><tr>
                          <th>61</th><th>61</th><td class="l"><span></span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>62</th><th> </th><td class="l"><span>def <del>SnobfitTermination(rtol=1e-6, ftol=1e-6, generations=250</del>):</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>62</th><td class="r"><span>def <ins>FglobTermination(fglob=0, tolerance=1e-6, generations = None</ins>):</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>63</th><th>63</th><td class="l"><span>&nbsp; &nbsp; """</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>64</th><th> </th><td class="l"><span><del></del>Parameters:</span> </td>
                      </tr><tr>
                        <th>65</th><th> </th><td class="l"><span>rtol -- a relative error for checking stopping criterion.</span> </td>
                      </tr><tr>
                        <th>66</th><th> </th><td class="l"><span><del>ftol -- acceptable relative error in func(xopt) for convergence</del>.</span> </td>
                      </tr><tr>
                        <th>67</th><th> </th><td class="l"><span>generations <del>&nbsp;</del>-- number of times no improvement is tolerated.</span> </td>
                      </tr>
                      <tr>
                        <th> </th><th>64</th><td class="r"><span><ins>Input </ins>Parameters:</span> </td>
                      </tr><tr>
                        <th> </th><th>65</th><td class="r"><span>fglob&nbsp; &nbsp; &nbsp;-- User-specified global function value</span> </td>
                      </tr><tr>
                        <th> </th><th>66</th><td class="r"><span><ins>tolerance -- a relative error for checking stopping criterion</ins>.</span> </td>
                      </tr><tr class="last">
                        <th> </th><th>67</th><td class="r"><span>generations <ins></ins>-- number of times no improvement is tolerated.</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>68</th><th>68</th><td class="l"><span></span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>69</th><th> </th><td class="l"><span>Terminate if no improvement after iterations = generations or&nbsp; if </span> </td>
                      </tr><tr>
                        <th>70</th><th> </th><td class="l"><span>abs((fopt-fglob)/fglob) &lt; rtol for fglob != 0, abs(fopt) &lt; ftol </span> </td>
                      </tr><tr>
                        <th>71</th><th> </th><td class="l"><span>for fglob == 0"""</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>69</th><td class="r"><span>Terminate if abs((bestEnergy-fglob)/fglob &lt; tolerance)"""</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>72</th><th>70</th><td class="l"><span></span> </td>
                  </tr><tr>
                          <th>73</th><th>71</th><td class="l"><span>&nbsp; &nbsp; def _(inst):</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>74</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;answer = False</span> </td>
                      </tr><tr>
                        <th>75</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;hist = inst.energy_history</span> </td>
                      </tr><tr>
                        <th>76</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;if len(hist) &gt; generations and (hist[-generations]-hist[-1]) &lt; 0:</span> </td>
                      </tr><tr>
                        <th>77</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;answer = True</span> </td>
                      </tr><tr>
                        <th>78</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;else:</span> </td>
                      </tr><tr>
                        <th>79</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;fopt = inst.bestEnergy</span> </td>
                      </tr><tr>
                        <th>80</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;if inst.fglob:</span> </td>
                      </tr><tr>
                        <th>81</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;if&nbsp; abs((fopt-inst.fglob)/inst.fglob) &lt; rtol:</span> </td>
                      </tr><tr>
                        <th>82</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;answer = True </span> </td>
                      </tr><tr>
                        <th>83</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;else: # safeguard if functions with fglob=0 are added by user</span> </td>
                      </tr><tr>
                        <th>84</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;if&nbsp; abs(fopt) &lt; ftol:</span> </td>
                      </tr><tr>
                        <th>85</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;answer = True </span> </td>
                      </tr><tr>
                        <th>86</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;return answer</span> </td>
                      </tr>
                      <tr>
                        <th> </th><th>72</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;if generations:</span> </td>
                      </tr><tr>
                        <th> </th><th>73</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;hist = inst.energy_history</span> </td>
                      </tr><tr>
                        <th> </th><th>74</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;lg = len(hist)</span> </td>
                      </tr><tr>
                        <th> </th><th>75</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;return lg &gt; generations and (hist[-generations]-hist[-1]) &lt; 0</span> </td>
                      </tr><tr>
                        <th> </th><th>76</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;return fglob != 0 and \</span> </td>
                      </tr><tr class="last">
                        <th> </th><th>77</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;abs((inst.bestEnergy-fglob)/fglob) &lt; tolerance</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>87</th><th>78</th><td class="l"><span>&nbsp; &nbsp; return _</span> </td>
                  </tr><tr>
                          <th>88</th><th>79</th><td class="l"><span></span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>89</th><th> </th><td class="l"><span>def AnnealTermination(feps=1e-6):</span> </td>
                      </tr><tr>
                        <th>90</th><th> </th><td class="l"><span>&nbsp; &nbsp; """Terminate if abs((population-x0)/x0) &lt; feps"""</span> </td>
                      </tr>
                      <tr>
                        <th> </th><th>80</th><td class="r"><span>def VTRChangeOverGenerations(costtolerance = 0.005, gentolerance = 1e-6, \</span> </td>
                      </tr><tr>
                        <th> </th><th>81</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;generations = 250):</span> </td>
                      </tr><tr>
                        <th> </th><th>82</th><td class="r"><span>&nbsp; &nbsp; """Terminate if change in cost is &lt; gentolerance over a number of </span> </td>
                      </tr><tr>
                        <th> </th><th>83</th><td class="r"><span>generations, or cost of last iteration is &lt; costtolerance:</span> </td>
                      </tr><tr>
                        <th> </th><th>84</th><td class="r"><span></span> </td>
                      </tr><tr>
                        <th> </th><th>85</th><td class="r"><span>cost[-g] - cost[-1] &lt; gentolerance, where g=generations or </span> </td>
                      </tr><tr>
                        <th> </th><th>86</th><td class="r"><span>cost[-1] &lt; costtolerance."""</span> </td>
                      </tr><tr>
                        <th> </th><th>87</th><td class="r"><span>&nbsp; &nbsp; def _(inst):</span> </td>
                      </tr><tr>
                        <th> </th><th>88</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;hist = inst.energy_history</span> </td>
                      </tr><tr>
                        <th> </th><th>89</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;lg = len(hist)</span> </td>
                      </tr><tr>
                        <th> </th><th>90</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;return (lg &gt; generations and (hist[-generations]-hist[-1]) &lt; gentolerance)\</span> </td>
                      </tr><tr>
                        <th> </th><th>91</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; or ( hist[-1] &lt; costtolerance )</span> </td>
                      </tr><tr>
                        <th> </th><th>92</th><td class="r"><span>&nbsp; &nbsp; return _</span> </td>
                      </tr><tr>
                        <th> </th><th>93</th><td class="r"><span></span> </td>
                      </tr><tr>
                        <th> </th><th>94</th><td class="r"><span>def AveragePopulationImprovement(tolerance=1e-6):</span> </td>
                      </tr><tr class="last">
                        <th> </th><th>95</th><td class="r"><span>&nbsp; &nbsp; """Terminate if abs((population-population[0])/population[0]) &lt; tolerance"""</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>91</th><th>96</th><td class="l"><span>&nbsp; &nbsp; def _(inst):</span> </td>
                  </tr><tr>
                          <th>92</th><th>97</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;sim = inst.population</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>93</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;return all(abs((sim-sim[0])/sim[0]) &lt; <del>feps</del>)</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>98</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;return all(abs((sim-sim[0])/sim[0]) &lt; <ins>tolerance</ins>)</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>94</th><th>99</th><td class="l"><span>&nbsp; &nbsp; return _</span> </td>
                  </tr><tr>
                          <th>95</th><th>100</th><td class="l"><span></span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>96</th><th> </th><td class="l"><span>def GradientTermination(gtol=1e-5, norm=Inf): </span> </td>
                      </tr><tr>
                        <th>97</th><th> </th><td class="l"><span>&nbsp; &nbsp; """Terminate if abs(gfk)**norm**1/norm &lt;= gtol</span> </td>
                      </tr><tr>
                        <th>98</th><th> </th><td class="l"><span>where gfk is the gradient value"""</span> </td>
                      </tr>
                      <tr>
                        <th> </th><th>101</th><td class="r"><span>def GradientTermination(tolerance=1e-5, norm=Inf): </span> </td>
                      </tr><tr class="last">
                        <th> </th><th>102</th><td class="r"><span>&nbsp; &nbsp; """Terminate based on the current gradient value gfk."""</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>99</th><th>103</th><td class="l"><span>&nbsp; &nbsp; def _(inst):</span> </td>
                  </tr><tr>
                          <th>100</th><th>104</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; gfk = inst.gfk</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://mmckerns.github.io/project/mystic/browser/branches/alta/mystic-0.1a2/mystic/termination.py?rev=169#L105">…</a></th>
                  <th><a href="http://mmckerns.github.io/project/mystic/browser/branches/alta/mystic-0.1a2/mystic/termination.py?rev=175#L109">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>105</th><th>109</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; else:</span> </td>
                  </tr><tr>
                          <th>106</th><th>110</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; gnorm= numpy.sum(abs(gfk)**norm,axis=0)**(1.0/norm)</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>107</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; return gnorm &lt;= <del>gtol</del></span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>111</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; return gnorm &lt;= <ins>tolerance</ins></span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>108</th><th>112</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span> </td>
                  </tr><tr>
                          <th>109</th><th>113</th><td class="l"><span>&nbsp; &nbsp; return _</span> </td>
                  </tr><tr>
                          <th>110</th><th>114</th><td class="l"><span></span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>111</th><th> </th><td class="l"><span>def <del>XTermination(tolerance=1e-5):&nbsp; # Rename me?</del></span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>115</th><td class="r"><span>def <ins>SolutionImprovement(tolerance=1e-5):&nbsp; </ins></span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>112</th><th>116</th><td class="l"><span>&nbsp; &nbsp; """Terminate if the difference between the last two </span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>113</th><th> </th><td class="l"><span>best solutions<del>&nbsp;abs(bestSolution - trialSolution)</del> is less than tolerance."""</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>117</th><td class="r"><span>best solutions<ins>, abs(bestSolution - trialSolution),</ins> is less than tolerance."""</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>114</th><th>118</th><td class="l"><span>&nbsp; &nbsp; def _(inst):</span> </td>
                  </tr><tr>
                          <th>115</th><th>119</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; update = inst.bestSolution - inst.trialSolution</span> </td>
                  </tr>
            </tbody>
        </table>
      </li>
  </ul>
</div>
        <div id="help"><strong>Note:</strong> See <a href="../wiki/TracChangeset.html">TracChangeset</a>
          for help on using the changeset viewer.</div>
      </div>
    </div>
    <div id="altlinks">
      <h3>Download in other formats:</h3>
      <ul>
        <li class="first">
          <a rel="nofollow" href="http://mmckerns.github.io/project/mystic/changeset/175?format=diff&amp;new=175" class="diff">Unified Diff</a>
        </li><li class="last">
          <a rel="nofollow" href="http://mmckerns.github.io/project/mystic/changeset/175?format=zip&amp;new=175" class="zip">Zip Archive</a>
        </li>
      </ul>
    </div>
    </div>
    <div id="footer" lang="en" xml:lang="en"><hr />
      <a id="uqf" href="http://www.uqfoundation.org/"><img src="http://mmckerns.github.io/projects/mystic/UQ.png" height="38" width="50" alt="UQ Foundation" /></a>
      <a id="caltech"><img src="http://mmckerns.github.io/projects/mystic/Caltech.png" height="40" width="40" alt="Caltech" /></a>
      <a id="nsf"><img src="http://mmckerns.github.io/projects/mystic/NSF.png" height="42" width="42" alt="NSF" /></a>
      <a id="afosr"><img src="http://mmckerns.github.io/projects/mystic/AFOSR.png" height="40" width="40" alt="AFOSR" /></a>
      <a id="doe"><img src="http://mmckerns.github.io/projects/mystic/DOE.png" height="40" width="40" alt="DOE" /></a>
      <a id="nnsa"><img src="http://mmckerns.github.io/projects/mystic/NNSA.png" height="40" width="100" alt="NNSA" /></a>
      <p class="left">Powered by <a href="../about.html"><strong>Trac 0.12</strong></a><br />
        and coffee, lots of coffee.<br />
        This project is funded by...</p>
      <p class="right">For more information, please visit<br />the mystic project homepage at<br /><a href="http://mmckerns.github.io/projects/mystic">http://mmckerns.github.io/projects/mystic</a></p>
    </div>
    <div id="sitefooter">
    </div>
  </body>

<!-- Mirrored from mmckerns.github.io/project/mystic/changeset/175 by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 19 May 2016 00:51:30 GMT -->
</html>
